<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PRASCO Admin Dashboard - Digitales Schwarzes Brett</title>
    <link rel="stylesheet" href="/css/admin.css" />
    <link rel="icon" type="image/x-icon" href="https://www.prasco.net/favicon.ico" />
  </head>
  <body>
    <div class="admin-layout">
      <nav class="sidebar">
        <div class="sidebar-header">
          <img
            src="https://www.prasco.net/content/files/images/Prasco/logo-small.png"
            alt="PRASCO"
            class="logo-image"
            style="max-width: 150px; margin-bottom: 1rem"
          />
          <h2>Admin Panel</h2>
        </div>
        <ul class="sidebar-menu">
          <li>
            <a href="#dashboard" class="active"><span class="icon">‚óâ</span> Dashboard</a>
          </li>
          <li>
            <a href="#posts"><span class="icon">‚ñ§</span> Beitr√§ge</a>
          </li>
          <li>
            <a href="#categories"><span class="icon">‚óà</span> Kategorien</a>
          </li>
          <li>
            <a href="#users"><span class="icon">‚óé</span> Benutzer</a>
          </li>
          <li>
            <a href="#settings"><span class="icon">‚öô</span> Einstellungen</a>
          </li>
          <li>
            <a href="#" id="logout"><span class="icon">‚èª</span> Logout</a>
          </li>
        </ul>
      </nav>

      <main class="admin-content">
        <header class="admin-header">
          <h1 id="page-title">Dashboard</h1>
          <div class="user-info">
            <button
              class="btn btn-secondary btn-sm"
              id="changePasswordBtn"
              title="Eigenes Passwort √§ndern"
            >
              ‚ñ∑
            </button>
            <span id="username">Admin</span>
            <span class="user-role-badge" id="userRoleBadge"></span>
          </div>
        </header>

        <div class="content-area">
          <!-- Dashboard Section -->
          <section id="dashboard-section" class="section active">
            <div class="stats-grid">
              <div class="stat-card clickable" data-target="posts-section">
                <h3 data-i18n="dashboard.activePosts">Aktive Beitr√§ge</h3>
                <p class="stat-number" id="active-posts">0</p>
              </div>
              <div class="stat-card clickable" data-target="posts-section">
                <h3 data-i18n="dashboard.scheduledPosts">Geplante Beitr√§ge</h3>
                <p class="stat-number" id="scheduled-posts">0</p>
              </div>
              <div class="stat-card clickable" data-target="categories-section">
                <h3 data-i18n="dashboard.categories">Kategorien</h3>
                <p class="stat-number" id="total-categories">0</p>
              </div>
              <div class="stat-card clickable" data-target="media-section">
                <h3 data-i18n="dashboard.media">Medien</h3>
                <p class="stat-number" id="total-media">0</p>
              </div>
            </div>

            <div class="quick-actions">
              <h2 data-i18n="dashboard.quickActions">Schnellaktionen</h2>
              <button class="btn btn-primary" id="quickNewPostBtn" data-i18n="dashboard.newPost">
                Neuer Beitrag
              </button>
              <button
                class="btn btn-secondary"
                id="openDisplayBtn"
                data-i18n="dashboard.openDisplay"
              >
                Display √∂ffnen
              </button>
              <button
                class="btn btn-accent"
                id="openPresentationBtn"
                data-i18n="dashboard.presentationMode"
                title="Manuelle Navigation mit Pfeiltasten oder Mausklick"
              >
                ‚ñ∑ Vortragsmodus
              </button>
            </div>
          </section>

          <!-- Posts Section -->
          <section id="posts-section" class="section">
            <div class="section-header">
              <h2>Beitr√§ge verwalten</h2>
              <div>
                <button class="btn btn-success" id="showPostFormBtn">+ Neuer Beitrag</button>
                <button class="btn btn-primary" id="downloadExternalVideosBtn" style="margin-left: 10px;" title="YouTube/Vimeo Videos herunterladen f√ºr Offline-Nutzung">‚¨áÔ∏è Videos offline</button>
                <button class="btn btn-danger" id="deleteAllPostsBtn" style="margin-left: 10px;">üóëÔ∏è Alle l√∂schen</button>
              </div>
            </div>

            <!-- Bulk Actions Bar (hidden by default) -->
            <div id="bulk-actions-bar" style="display: none; padding: 1rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 1rem; border: 2px solid #dee2e6;">
              <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                <label style="display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin: 0;">
                  <input type="checkbox" id="select-all-posts" style="width: 18px; height: 18px; cursor: pointer;">
                  Alle ausw√§hlen
                </label>
                <span id="selected-count" style="color: #007bff; font-weight: 600;">0 ausgew√§hlt</span>
                <div style="margin-left: auto; display: flex; gap: 0.5rem;">
                  <button class="btn btn-primary" id="bulk-activate-btn" disabled>‚úì Aktivieren</button>
                  <button class="btn btn-secondary" id="bulk-deactivate-btn" disabled>‚úó Deaktivieren</button>
                  <button class="btn btn-danger" id="bulk-delete-btn" disabled>üóëÔ∏è L√∂schen</button>
                </div>
              </div>
            </div>

            <div id="post-form" class="form-container" style="display: none">
              <form id="postForm">
                <div class="form-row">
                  <div class="form-group">
                    <label for="post-title">Titel *</label>
                    <input type="text" id="post-title" name="title" required />
                  </div>

                  <div class="form-group">
                    <label for="post-type">Typ *</label>
                    <select id="post-type" name="content_type" required>
                      <option value="text">üìù Text</option>
                      <option value="image">üñºÔ∏è Bild</option>
                      <option value="video">üé• Video</option>
                      <option value="html">üåê HTML</option>
                      <option value="presentation">üìä PowerPoint Pr√§sentation</option>
                      <option value="pdf">üìÑ PDF Dokument</option>
                      <option value="word">üìÉ Word Dokument</option>
                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label for="post-category">Kategorie</label>
                  <select id="post-category" name="category_id">
                    <option value="">-- Keine Kategorie --</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="post-content">Inhalt</label>
                  <textarea id="post-content" name="content" rows="5"></textarea>
                </div>

                <div class="form-group" id="upload-section" style="display: none;">
                  <label style="font-weight: 600; margin-bottom: 0.5rem; display: block;">Inhalte hochladen</label>
                  
                  <!-- Option 1: Word/PDF Import (nur bei Text/HTML) -->
                  <div id="word-pdf-import" style="margin-bottom: 1rem;">
                    <button type="button" class="btn btn-secondary" id="import-document-btn" style="width: 100%; font-size: 0.95rem;">
                      üìÑ Word/PDF importieren
                    </button>
                    <small style="color: #666; display: block; margin-top: 0.5rem; text-align: center;">
                      Importieren Sie .docx oder .pdf Dateien (max. 10MB)
                    </small>
                  </div>

                  <!-- Option 2: Datei hochladen (nur bei anderen Typen) -->
                  <div id="file-upload-section" style="display: none;">
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                      <button type="button" class="btn btn-secondary" id="trigger-file-upload" style="font-size: 0.9rem; display: inline-block;">
                        üìÅ Datei hochladen
                      </button>
                      <small style="color: #666; align-self: center;">
                        Bilder, Videos, Audio, PDFs, Word, PowerPoint (max. 100MB)
                      </small>
                    </div>
                    <input
                      type="file"
                      id="media-file"
                      name="media_file"
                      accept="image/*,video/*,audio/*,.pdf,.doc,.docx,.pptx,.ppt,.odp"
                      style="display: none;"
                    />
                    <div id="upload-progress" style="display: none; margin-top: 0.5rem">
                      <div style="background: #e0e0e0; border-radius: 4px; height: 20px; overflow: hidden;">
                        <div id="upload-progress-bar" style="background: #007bff; height: 100%; width: 0%; transition: width 0.3s"></div>
                      </div>
                      <small id="upload-status" style="color: #007bff">Uploading...</small>
                    </div>
                  </div>

                  <!-- Option 3: Medien-URL (nur bei anderen Typen) -->
                  <div id="media-url-section" style="margin-top: 1rem; display: none;">
                    <label for="media-url" style="font-weight: 500; margin-bottom: 0.5rem; display: block;">Medien-URL (oder Datei hochladen)</label>
                    <input
                      type="text"
                      id="media-url"
                      name="media_url"
                      placeholder="https://... oder /uploads/originals/..."
                      style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;"
                    />
                    <small style="color: #666; display: block; margin-top: 0.5rem;">
                      YouTube/Vimeo URLs werden automatisch als Video eingebettet
                    </small>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="display-duration">Anzeigedauer (Sek.)</label>
                    <input
                      type="number"
                      id="display-duration"
                      name="display_duration"
                      value="10"
                      min="1"
                    />
                  </div>

                  <div class="form-group">
                    <label for="priority">Priorit√§t (0-100)</label>
                    <input type="number" id="priority" name="priority" value="0" min="0" max="100" />
                  </div>

                  <div class="form-group">
                    <label for="blend-effect">√úbergangseffekt</label>
                    <select id="blend-effect" name="blend_effect">
                      <option value="">Kein Effekt</option>
                      <option value="fade">Fade (√úberblenden)</option>
                      <option value="slide-left">Slide Left (Nach links)</option>
                      <option value="slide-right">Slide Right (Nach rechts)</option>
                      <option value="slide-up">Slide Up (Nach oben)</option>
                      <option value="slide-down">Slide Down (Nach unten)</option>
                      <option value="zoom-in">Zoom In (Hineinzoomen)</option>
                      <option value="zoom-out">Zoom Out (Herauszoomen)</option>
                    </select>
                    <small style="color: #666; display: block; margin-top: 0.25rem">W√§hlen Sie einen √úbergangseffekt zum n√§chsten Beitrag</small>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="start-date">Start-Datum</label>
                    <input type="datetime-local" id="start-date" name="start_date" />
                  </div>

                  <div class="form-group">
                    <label for="end-date">End-Datum</label>
                    <input type="datetime-local" id="end-date" name="end_date" />
                  </div>
                </div>

                <!-- Hintergrundmusik (nur f√ºr nicht-Video-Inhalte) -->
                <div class="form-group background-music-section" id="background-music-section">
                  <label> <span class="settings-icon">‚ô™</span> Hintergrundmusik (optional) </label>
                  <small style="color: #666; display: block; margin-bottom: 0.5rem">
                    Nur f√ºr Text, Bild und HTML-Inhalte. Bei Videos wird der Original-Ton verwendet.
                  </small>
                  <div class="form-row">
                    <div class="form-group" style="flex: 2">
                      <label for="background-music-file">Musik-Datei</label>
                      <input
                        type="file"
                        id="background-music-file"
                        name="background_music_file"
                        accept="audio/*,.mp3,.wav,.ogg,.m4a"
                      />
                      <small style="color: #666">Unterst√ºtzt: MP3, WAV, OGG, M4A</small>
                    </div>
                    <div class="form-group" style="flex: 1">
                      <label for="background-music-volume">Lautst√§rke</label>
                      <div class="volume-control">
                        <input
                          type="range"
                          id="background-music-volume"
                          name="background_music_volume"
                          min="0"
                          max="100"
                          value="50"
                        />
                        <span id="volume-display">50%</span>
                      </div>
                    </div>
                  </div>
                  <div id="current-music-info" style="display: none; margin-top: 0.5rem">
                    <small style="color: #28a745">
                      <span class="btn-icon">‚ô™</span> Aktuelle Musik:
                      <span id="current-music-name"></span>
                      <button
                        type="button"
                        class="btn btn-sm btn-secondary"
                        id="remove-music-btn"
                        style="margin-left: 0.5rem"
                      >
                        ‚úï Entfernen
                      </button>
                      <button
                        type="button"
                        class="btn btn-sm btn-secondary"
                        id="preview-music-btn"
                        style="margin-left: 0.25rem"
                      >
                        ‚ñ∂ Vorschau
                      </button>
                    </small>
                  </div>
                  <audio id="music-preview" style="display: none"></audio>
                </div>

                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" name="is_active" checked />
                    <span>Aktiv</span>
                  </label>
                </div>

                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" name="show_title" id="show-title" checked />
                    <span>Titel anzeigen</span>
                  </label>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary">Beitrag speichern</button>
                  <button type="button" class="btn btn-secondary" id="hidePostFormBtn">
                    Abbrechen
                  </button>
                </div>
              </form>
            </div>

            <div class="posts-list" id="posts-list">
              <!-- Wird dynamisch gef√ºllt -->
            </div>

            <div style="margin-top: 1.5rem; text-align: center; padding: 1rem 0; border-top: 1px solid #e0e0e0;">
              <button class="btn btn-secondary" id="downloadExternalVideosBtn">üì• Externe Videos herunterladen</button>
            </div>
          </section>

          <!-- Categories Section -->
          <section id="categories-section" class="section">
            <div class="section-header">
              <h2>Kategorien verwalten</h2>
              <button class="btn btn-primary" id="showCategoryFormBtn">+ Neue Kategorie</button>
            </div>

            <div id="category-form" class="form-container" style="display: none">
              <h2>+ Neue Kategorie</h2>
              <form id="categoryForm">
                <div class="form-group">
                  <label for="category-name">Name *</label>
                  <input type="text" id="category-name" name="name" required />
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="category-color">Farbe</label>
                    <input type="color" id="category-color" name="color" value="#4caf50" />
                  </div>

                  <div class="form-group">
                    <label for="category-icon">Icon</label>
                    <select id="category-icon" name="icon" class="icon-select">
                      <optgroup label="Geometrische Formen">
                        <option value="‚óè">‚óè Kreis (gef√ºllt)</option>
                        <option value="‚óã">‚óã Kreis (leer)</option>
                        <option value="‚óâ">‚óâ Kreis mit Punkt</option>
                        <option value="‚óé">‚óé Doppelkreis</option>
                        <option value="‚ñ†" selected>‚ñ† Quadrat (gef√ºllt)</option>
                        <option value="‚ñ°">‚ñ° Quadrat (leer)</option>
                        <option value="‚ñ™">‚ñ™ Kleines Quadrat</option>
                        <option value="‚ñ´">‚ñ´ Kleines Quadrat (leer)</option>
                        <option value="‚óÜ">‚óÜ Raute (gef√ºllt)</option>
                        <option value="‚óá">‚óá Raute (leer)</option>
                        <option value="‚óà">‚óà Raute mit Punkt</option>
                        <option value="‚ñ≤">‚ñ≤ Dreieck hoch</option>
                        <option value="‚ñ≥">‚ñ≥ Dreieck hoch (leer)</option>
                        <option value="‚ñº">‚ñº Dreieck runter</option>
                        <option value="‚ñΩ">‚ñΩ Dreieck runter (leer)</option>
                        <option value="‚óÄ">‚óÄ Dreieck links</option>
                        <option value="‚ñ∂">‚ñ∂ Dreieck rechts</option>
                        <option value="‚¨ü">‚¨ü Sechseck</option>
                        <option value="‚¨¢">‚¨¢ Sechseck (gef√ºllt)</option>
                      </optgroup>
                      <optgroup label="Sterne & Symbole">
                        <option value="‚òÖ">‚òÖ Stern (gef√ºllt)</option>
                        <option value="‚òÜ">‚òÜ Stern (leer)</option>
                        <option value="‚ú¶">‚ú¶ Stern 4-zackig</option>
                        <option value="‚úß">‚úß Stern 4-zackig (leer)</option>
                        <option value="‚ú™">‚ú™ Stern im Kreis</option>
                        <option value="‚ú´">‚ú´ Stern offen</option>
                        <option value="‚ú¨">‚ú¨ Stern gef√ºllt</option>
                        <option value="‚ú≠">‚ú≠ Stern umrandet</option>
                        <option value="‚úÆ">‚úÆ Stern 6-zackig</option>
                        <option value="‚úØ">‚úØ Stern 6-zackig (leer)</option>
                      </optgroup>
                      <optgroup label="Pfeile & Zeiger">
                        <option value="‚ñ∏">‚ñ∏ Pfeil rechts</option>
                        <option value="‚ñπ">‚ñπ Pfeil rechts (leer)</option>
                        <option value="‚ñ∫">‚ñ∫ Pfeil rechts (gro√ü)</option>
                        <option value="‚ñª">‚ñª Pfeil rechts (gro√ü, leer)</option>
                        <option value="‚Üí">‚Üí Pfeil rechts (d√ºnn)</option>
                        <option value="‚áí">‚áí Doppelpfeil</option>
                        <option value="‚û§">‚û§ Pfeilspitze</option>
                        <option value="‚ûî">‚ûî Pfeil breit</option>
                      </optgroup>
                      <optgroup label="H√§kchen & Kreuze">
                        <option value="‚úì">‚úì H√§kchen</option>
                        <option value="‚úî">‚úî H√§kchen (fett)</option>
                        <option value="‚úï">‚úï Kreuz</option>
                        <option value="‚úñ">‚úñ Kreuz (fett)</option>
                        <option value="‚úó">‚úó Kreuz (Ballot)</option>
                        <option value="‚úò">‚úò Kreuz (Ballot, fett)</option>
                      </optgroup>
                      <optgroup label="Info & Status">
                        <option value="‚Ñπ">‚Ñπ Info</option>
                        <option value="‚ö†">‚ö† Warnung</option>
                        <option value="‚ö°">‚ö° Blitz</option>
                        <option value="‚öô">‚öô Zahnrad</option>
                        <option value="‚öë">‚öë Flagge</option>
                        <option value="‚öê">‚öê Flagge (leer)</option>
                        <option value="‚ô¶">‚ô¶ Karo</option>
                        <option value="‚ô†">‚ô† Pik</option>
                        <option value="‚ô£">‚ô£ Kreuz</option>
                        <option value="‚ô•">‚ô• Herz</option>
                      </optgroup>
                      <optgroup label="Weitere Symbole">
                        <option value="‚òÄ">‚òÄ Sonne</option>
                        <option value="‚òÅ">‚òÅ Wolke</option>
                        <option value="‚òÇ">‚òÇ Regenschirm</option>
                        <option value="‚òé">‚òé Telefon</option>
                        <option value="‚òê">‚òê Checkbox (leer)</option>
                        <option value="‚òë">‚òë Checkbox (angehakt)</option>
                        <option value="‚òí">‚òí Checkbox (gekreuzt)</option>
                        <option value="‚òõ">‚òõ Zeigefinger</option>
                        <option value="‚òû">‚òû Zeigefinger (leer)</option>
                        <option value="‚ô™">‚ô™ Note</option>
                        <option value="‚ô´">‚ô´ Noten</option>
                        <option value="‚åÇ">‚åÇ Haus</option>
                        <option value="‚åò">‚åò Command</option>
                        <option value="‚è±">‚è± Stoppuhr</option>
                        <option value="‚è∞">‚è∞ Wecker</option>
                      </optgroup>
                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label for="category-description">Beschreibung</label>
                  <textarea
                    id="category-description"
                    name="description"
                    rows="2"
                    placeholder="Optionale Beschreibung..."
                  ></textarea>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary">Kategorie erstellen</button>
                  <button type="button" class="btn btn-secondary" id="hideCategoryFormBtn">
                    Abbrechen
                  </button>
                </div>
              </form>
            </div>

            <div class="categories-list" id="categories-list">
              <!-- Wird dynamisch gef√ºllt -->
            </div>
          </section>

          <!-- Users Section -->
          <section id="users-section" class="section">
            <div class="section-header">
              <h2>Benutzer verwalten</h2>
              <button class="btn btn-primary" id="showUserFormBtn">+ Neuer Benutzer</button>
            </div>

            <div id="user-form" class="form-container" style="display: none">
              <form id="userForm">
                <div class="form-row">
                  <div class="form-group">
                    <label for="user-firstName">Vorname *</label>
                    <input type="text" id="user-firstName" name="firstName" required />
                  </div>

                  <div class="form-group">
                    <label for="user-lastName">Nachname *</label>
                    <input type="text" id="user-lastName" name="lastName" required />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="user-email">E-Mail *</label>
                    <input type="email" id="user-email" name="email" required />
                  </div>

                  <div class="form-group">
                    <label for="user-role">Rolle *</label>
                    <select id="user-role" name="role" required>
                      <option value="viewer">Betrachter</option>
                      <option value="editor">Editor</option>
                      <option value="admin">Administrator</option>
                      <option value="display">Display</option>
                    </select>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="user-password">Passwort *</label>
                    <input type="password" id="user-password" name="password" minlength="6" />
                    <small class="form-hint"
                      >Min. 6 Zeichen (leer lassen f√ºr keine √Ñnderung bei Bearbeitung)</small
                    >
                  </div>

                  <div class="form-group">
                    <label for="user-isActive">Status</label>
                    <select id="user-isActive" name="isActive">
                      <option value="true">Aktiv</option>
                      <option value="false">Inaktiv</option>
                    </select>
                  </div>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary">Benutzer speichern</button>
                  <button type="button" class="btn btn-secondary" id="hideUserFormBtn">
                    Abbrechen
                  </button>
                </div>
              </form>
            </div>

            <div class="users-list" id="users-list">
              <!-- Wird dynamisch gef√ºllt -->
            </div>
          </section>

          <!-- Settings Section -->
          <section id="settings-section" class="section">
            <h2>Einstellungen</h2>

            <!-- System-Modus (Raspberry Pi) -->
            <div class="settings-card" id="system-mode-card" style="display: block;">
              <h3><span class="settings-icon">üì°</span> System-Modus</h3>
              <p class="settings-description">
                Wechseln Sie zwischen Normal-Modus (Netzwerk-Verbindung) und Hotspot-Modus (Offline-Betrieb).
              </p>
              
              <div id="system-mode-status" class="system-mode-status">
                <div class="mode-indicator">
                  <span class="mode-icon">‚è≥</span>
                  <span class="mode-text">Status wird geladen...</span>
                </div>
              </div>

              <div class="settings-form">
                <div class="mode-selection">
                  <label class="mode-option">
                    <input type="radio" name="system-mode" value="normal" id="mode-normal">
                    <div class="mode-card">
                      <div class="mode-header">
                        <span class="mode-icon">üåê</span>
                        <h4>Normal-Modus</h4>
                      </div>
                      <ul class="mode-features">
                        <li>Verbindung zum vorhandenen Netzwerk</li>
                        <li>Internet-Zugang erforderlich</li>
                        <li>Externe Server-URL verwendbar</li>
                      </ul>
                    </div>
                  </label>

                  <label class="mode-option">
                    <input type="radio" name="system-mode" value="hotspot" id="mode-hotspot">
                    <div class="mode-card">
                      <div class="mode-header">
                        <span class="mode-icon">üì∂</span>
                        <h4>Hotspot-Modus</h4>
                      </div>
                      <ul class="mode-features">
                        <li>Raspberry Pi erstellt WiFi Hotspot</li>
                        <li>SSID: <strong>PRASCO-Display</strong></li>
                        <li>Passwort: <strong>prasco123</strong></li>
                        <li>IP: <strong>192.168.4.1:3000</strong></li>
                      </ul>
                    </div>
                  </label>
                </div>

                <button class="btn btn-primary" id="switchSystemMode" style="margin-top: 1rem;">
                  Modus wechseln
                </button>
              </div>
            </div>

            <!-- Allgemeine Einstellungen -->
            <div class="settings-card">
              <h3><span class="settings-icon">&#9881;</span> Display-Einstellungen</h3>
              <div class="settings-form">
                <div class="form-group">
                  <label for="refresh-interval">Auto-Refresh Intervall (Minuten)</label>
                  <input type="number" id="refresh-interval" value="5" min="1" />
                </div>

                <div class="form-group">
                  <label for="default-duration">Standard Anzeigedauer (Sekunden)</label>
                  <input type="number" id="default-duration" value="10" min="1" />
                </div>

                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="blend-effects-enabled" />
                    <span>√úbergangseffekte aktivieren</span>
                  </label>
                  <small style="color: #666; display: block; margin-top: 0.25rem">
                    Aktiviert animierte √úberg√§nge zwischen Beitr√§gen (Fade, Slide, Zoom)
                  </small>
                </div>

                <button class="btn btn-primary" id="saveDisplaySettings">
                  Einstellungen speichern
                </button>
              </div>
            </div>

            <!-- Globale Hintergrundmusik -->
            <div class="settings-card">
              <h3><span class="settings-icon">&#9835;</span> Globale Hintergrundmusik</h3>
              <p class="settings-description">
                Musik die √ºber alle Beitr√§ge hinweg abgespielt wird. Videos werden automatisch stumm
                geschaltet.
              </p>
              <div class="settings-form">
                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="global-music-enabled" />
                    <span>Globale Hintergrundmusik aktivieren</span>
                  </label>
                </div>

                <div id="global-music-config" style="display: none">
                  <div class="form-group">
                    <label for="global-music-url">Musik-URL</label>
                    <input
                      type="url"
                      id="global-music-url"
                      placeholder="https://example.com/music.mp3"
                    />
                  </div>

                  <div class="form-group">
                    <label for="global-music-file">Oder Musik-Datei hochladen</label>
                    <input type="file" id="global-music-file" accept="audio/*" />
                  </div>

                  <div class="form-group">
                    <label for="global-music-volume"
                      >Lautst√§rke: <span id="global-volume-value">30</span>%</label
                    >
                    <input type="range" id="global-music-volume" min="0" max="100" value="30" />
                  </div>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="global-music-mute-videos" checked />
                      <span>Videos automatisch stumm schalten</span>
                    </label>
                  </div>
                </div>

                <button class="btn btn-primary" id="saveGlobalMusicSettings">
                  Musik-Einstellungen speichern
                </button>
                <button class="btn btn-secondary" id="testGlobalMusic" style="margin-left: 0.5rem">
                  Test ‚ñ∑
                </button>
              </div>
            </div>

            <!-- Spracheinstellungen -->
            <div class="settings-card">
              <h3><span class="settings-icon">&#127760;</span> Spracheinstellungen</h3>
              <div class="settings-form">
                <div class="form-group">
                  <label for="app-language">Sprache / Language / Lingua</label>
                  <select id="app-language">
                    <option value="de" data-flag="üá©üá™">üá©üá™ Deutsch</option>
                    <option value="en" data-flag="üá¨üáß">üá¨üáß English</option>
                    <option value="it" data-flag="üáÆüáπ">üáÆüáπ Italiano</option>
                  </select>
                  <small id="language-hint"
                    >Die Sprache wird f√ºr die gesamte Benutzeroberfl√§che verwendet.</small
                  >
                </div>
              </div>
            </div>

            <!-- SSO Einstellungen (nur f√ºr Super-Admin) -->
            <div id="sso-settings-section" class="settings-card" style="display: none">
              <h3>
                <span class="settings-icon">&#128274;</span> Single Sign-On (SSO) Konfiguration
              </h3>
              <p class="settings-description">
                Konfigurieren Sie Azure AD / Microsoft Entra ID f√ºr SSO-Authentifizierung.
                <a
                  href="/SSO-SETUP.md"
                  target="_blank"
                  title="Setup-Anleitung √∂ffnen"
                  class="help-link"
                  >Setup-Anleitung</a
                >
              </p>

              <div id="sso-status-banner" class="sso-status-banner">
                <span class="sso-status-indicator"></span>
                <span class="sso-status-text">Status wird geladen...</span>
              </div>

              <form id="sso-config-form" class="settings-form">
                <!-- SSO aktivieren -->
                <div class="form-group">
                  <label class="checkbox-label sso-toggle">
                    <input type="checkbox" id="sso-enabled" name="enabled" />
                    <span>SSO aktivieren</span>
                  </label>
                </div>

                <div id="sso-config-details" class="sso-config-details" style="display: none">
                  <!-- Provider -->
                  <div class="form-group">
                    <label for="sso-provider">SSO Provider</label>
                    <select id="sso-provider" name="provider">
                      <option value="azure_ad">Azure AD / Microsoft Entra ID</option>
                      <option value="ldap">
                        LDAP / Active Directory (Windows Server 2016/2019/2022)
                      </option>
                      <option value="adfs" disabled>
                        Active Directory Federation Services (geplant)
                      </option>
                    </select>
                  </div>

                  <!-- Azure AD Konfiguration -->
                  <div id="azure-ad-config" class="sso-provider-config">
                    <h4>Azure AD Konfiguration</h4>

                    <div class="form-row">
                      <div class="form-group">
                        <label for="azure-tenant-id">Tenant ID *</label>
                        <input
                          type="text"
                          id="azure-tenant-id"
                          name="tenantId"
                          placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
                        />
                        <small>Directory (tenant) ID aus Azure Portal</small>
                      </div>

                      <div class="form-group">
                        <label for="azure-client-id">Client ID (Application ID) *</label>
                        <input
                          type="text"
                          id="azure-client-id"
                          name="clientId"
                          placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
                        />
                        <small>Application (client) ID aus Azure Portal</small>
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="azure-client-secret">Client Secret *</label>
                      <input
                        type="password"
                        id="azure-client-secret"
                        name="clientSecret"
                        placeholder="Geheimnis eingeben..."
                      />
                      <small>Client Secret aus Azure Portal (Zertifikate & Geheimnisse)</small>
                    </div>

                    <div class="form-row">
                      <div class="form-group">
                        <label for="azure-redirect-uri">Redirect URI</label>
                        <input
                          type="text"
                          id="azure-redirect-uri"
                          name="redirectUri"
                          placeholder="http://localhost:3000/api/auth/sso/callback"
                        />
                        <small>Muss mit Azure AD App Registration √ºbereinstimmen</small>
                      </div>

                      <div class="form-group">
                        <label for="azure-logout-uri">Post-Logout URI</label>
                        <input
                          type="text"
                          id="azure-logout-uri"
                          name="postLogoutRedirectUri"
                          placeholder="http://localhost:3000/admin"
                        />
                      </div>
                    </div>
                  </div>

                  <!-- LDAP / Active Directory Konfiguration -->
                  <div id="ldap-config" class="sso-provider-config" style="display: none">
                    <h4><span class="subsection-icon">‚¨°</span> LDAP / Active Directory</h4>
                    <p class="form-help">F√ºr Windows Server 2016/2019/2022 mit Active Directory</p>

                    <div class="form-row">
                      <div class="form-group">
                        <label for="ldap-url">LDAP Server URL *</label>
                        <input
                          type="text"
                          id="ldap-url"
                          name="ldapUrl"
                          placeholder="ldap://dc.firma.local:389"
                        />
                        <small>F√ºr SSL: ldaps://dc.firma.local:636</small>
                      </div>

                      <div class="form-group">
                        <label for="ldap-base-dn">Base DN *</label>
                        <input
                          type="text"
                          id="ldap-base-dn"
                          name="ldapBaseDN"
                          placeholder="DC=firma,DC=local"
                        />
                        <small>Root-DN Ihrer Active Directory Domain</small>
                      </div>
                    </div>

                    <div class="form-row">
                      <div class="form-group">
                        <label for="ldap-bind-dn">Bind DN (Service-Account) *</label>
                        <input
                          type="text"
                          id="ldap-bind-dn"
                          name="ldapBindDN"
                          placeholder="CN=svc_prasco,CN=Users,DC=firma,DC=local"
                        />
                        <small>Distinguished Name des Service-Accounts</small>
                      </div>

                      <div class="form-group">
                        <label for="ldap-bind-password">Bind Passwort *</label>
                        <input
                          type="password"
                          id="ldap-bind-password"
                          name="ldapBindPassword"
                          placeholder="Service-Account Passwort"
                        />
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="ldap-user-search-base">Benutzer-Suchbasis *</label>
                      <input
                        type="text"
                        id="ldap-user-search-base"
                        name="ldapUserSearchBase"
                        placeholder="CN=Users,DC=firma,DC=local"
                      />
                      <small>OU/CN in der nach Benutzern gesucht wird</small>
                    </div>

                    <div class="form-group">
                      <label for="ldap-user-search-filter">Benutzer-Suchfilter</label>
                      <input
                        type="text"
                        id="ldap-user-search-filter"
                        name="ldapUserSearchFilter"
                        placeholder="(sAMAccountName={{username}})"
                      />
                      <small>{{username}} wird durch den eingegebenen Benutzernamen ersetzt</small>
                    </div>

                    <h5>Gruppen-basierte Rollenzuweisung (optional)</h5>

                    <div class="form-row">
                      <div class="form-group">
                        <label for="ldap-admin-group">Admin-Gruppe</label>
                        <input
                          type="text"
                          id="ldap-admin-group"
                          name="ldapAdminGroup"
                          placeholder="CN=PRASCO-Admins,OU=Groups,DC=firma,DC=local"
                        />
                        <small>Mitglieder erhalten Admin-Rolle</small>
                      </div>

                      <div class="form-group">
                        <label for="ldap-editor-group">Editor-Gruppe</label>
                        <input
                          type="text"
                          id="ldap-editor-group"
                          name="ldapEditorGroup"
                          placeholder="CN=PRASCO-Editors,OU=Groups,DC=firma,DC=local"
                        />
                        <small>Mitglieder erhalten Editor-Rolle</small>
                      </div>
                    </div>

                    <div class="form-group">
                      <label class="checkbox-label">
                        <input type="checkbox" id="ldap-tls-reject" name="ldapTlsReject" />
                        <span
                          >Selbstsignierte Zertifikate ablehnen (f√ºr Produktionsumgebungen
                          empfohlen)</span
                        >
                      </label>
                    </div>
                  </div>

                  <hr class="settings-divider" />

                  <!-- Benutzereinstellungen -->
                  <h4>Benutzer-Einstellungen</h4>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="sso-auto-create" name="autoCreateUsers" checked />
                      <span>Benutzer automatisch erstellen bei erstem SSO-Login</span>
                    </label>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label for="sso-default-role">Standard-Rolle f√ºr neue SSO-Benutzer</label>
                      <select id="sso-default-role" name="defaultRole">
                        <option value="viewer">Betrachter</option>
                        <option value="editor" selected>Editor</option>
                        <option value="admin">Administrator</option>
                      </select>
                    </div>

                    <div class="form-group">
                      <label for="sso-allowed-domains">Erlaubte E-Mail-Domains</label>
                      <input
                        type="text"
                        id="sso-allowed-domains"
                        name="allowedDomains"
                        placeholder="z.B. firma.de, firma.com"
                      />
                      <small>Leer = alle Domains erlaubt, Komma-getrennt f√ºr mehrere</small>
                    </div>
                  </div>
                </div>

                <!-- Aktionen -->
                <div class="form-actions sso-actions">
                  <button type="submit" class="btn btn-primary" id="sso-save-btn">
                    <span class="btn-icon">&#10003;</span> Konfiguration speichern
                  </button>
                  <button type="button" class="btn btn-secondary" id="sso-test-btn">
                    <span class="btn-icon">&#8635;</span> Verbindung testen
                  </button>
                </div>

                <div id="sso-test-result" class="sso-test-result" style="display: none"></div>
              </form>
            </div>

            <!-- Info / √úber diese Anwendung -->
            <div class="settings-card">
              <h3><span class="settings-icon">&#9432;</span> √úber diese Anwendung</h3>
              <div class="app-info-section">
                <div class="app-info-logo">
                  <div class="app-logo-circle">
                    <span>P</span>
                  </div>
                </div>
                <div class="app-info-details">
                  <h4>PRASCO Digital Signage</h4>
                  <p class="app-description">
                    Digitales Schwarzes Brett f√ºr Unternehmen und Organisationen
                  </p>

                  <div class="app-info-grid">
                    <div class="app-info-item">
                      <span class="info-label">Version</span>
                      <span class="info-value" id="app-version">1.0.0</span>
                    </div>
                    <div class="app-info-item">
                      <span class="info-label">Entwickler</span>
                      <span class="info-value">Christian P√∂ser</span>
                    </div>
                    <div class="app-info-item">
                      <span class="info-label">Lizenz</span>
                      <span class="info-value">MIT License</span>
                    </div>
                    <div class="app-info-item">
                      <span class="info-label">Build</span>
                      <span class="info-value" id="app-build-date">2025</span>
                    </div>
                  </div>

                  <div class="app-tech-stack">
                    <span class="tech-badge">Node.js</span>
                    <span class="tech-badge">Express</span>
                    <span class="tech-badge">TypeScript</span>
                    <span class="tech-badge">PostgreSQL</span>
                    <span class="tech-badge">Sequelize</span>
                  </div>

                  <div class="app-links">
                    <a href="https://github.com" target="_blank" class="app-link"> ‚Üí Repository </a>
                    <a href="/api/docs" target="_blank" class="app-link"> ‚Üí API Dokumentation </a>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <footer class="admin-footer">
          <div class="footer-left">
            <span>¬© 2025 PRASCO - Digitales Schwarzes Brett</span>
          </div>
          <div class="footer-right">
            <span id="footer-clock" class="footer-clock">--:--:--</span>
            <span id="footer-date" class="footer-date"></span>
          </div>
        </footer>
      </main>
    </div>

    <!-- Modal: Eigenes Passwort √§ndern -->
    <div id="password-modal" class="modal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h3>‚ñ∑ Passwort √§ndern</h3>
          <button class="modal-close" id="closePasswordModal">&times;</button>
        </div>
        <form id="changePasswordForm">
          <div class="form-group">
            <label for="current-password">Aktuelles Passwort *</label>
            <input type="password" id="current-password" name="currentPassword" required />
          </div>
          <div class="form-group">
            <label for="new-password">Neues Passwort *</label>
            <input type="password" id="new-password" name="newPassword" minlength="6" required />
            <small class="form-hint">Mindestens 6 Zeichen</small>
          </div>
          <div class="form-group">
            <label for="confirm-password">Passwort best√§tigen *</label>
            <input
              type="password"
              id="confirm-password"
              name="confirmPassword"
              minlength="6"
              required
            />
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Passwort √§ndern</button>
            <button type="button" class="btn btn-secondary" id="cancelPasswordChange">
              Abbrechen
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="/js/admin.js?v=1.1"></script>
  </body>
</html>
