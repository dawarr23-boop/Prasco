<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PRASCO Admin Dashboard - Digitales Schwarzes Brett</title>
    <link rel="stylesheet" href="/css/admin.css?v=3.8" />
    <link rel="icon" type="image/x-icon" href="https://www.prasco.net/favicon.ico" />
  </head>
  <body>
    <div class="admin-layout">
      <nav class="sidebar">
        <div class="sidebar-header">
          <img
            src="https://www.prasco.net/content/files/images/Prasco/logo-small.png"
            alt="PRASCO"
            class="logo-image"
            style="max-width: 150px; margin-bottom: 1rem"
          />
          <h2>Admin Panel</h2>
        </div>
        <ul class="sidebar-menu">
          <li>
            <a href="#dashboard" class="active"><span class="icon">‚äû</span> Dashboard</a>
          </li>
          <li>
            <a href="#posts"><span class="icon">‚ò∞</span> Beitr√§ge</a>
          </li>
          <li>
            <a href="#categories"><span class="icon">‚óÜ</span> Kategorien</a>
          </li>
          <li>
            <a href="#displays"><span class="icon">‚ñ¢</span> Displays</a>
          </li>
          <li>
            <a href="#users"><span class="icon">‚óã</span> Benutzer</a>
          </li>
          <li>
            <a href="#livedata"><span class="icon">‚óâ</span> Live-Daten</a>
          </li>
          <li>
            <a href="#settings"><span class="icon">‚öô</span> Einstellungen</a>
          </li>
          <li>
            <a href="#" id="logout"><span class="icon">‚èª</span> Abmelden</a>
          </li>
        </ul>
      </nav>

      <main class="admin-content">
        <header class="admin-header">
          <h1 id="page-title">Dashboard</h1>
          <div class="user-info">
            <button
              class="btn btn-secondary btn-sm"
              id="changePasswordBtn"
              title="Eigenes Passwort √§ndern"
            >
              &#8942;
            </button>
            <span id="username">Admin</span>
            <span class="user-role-badge" id="userRoleBadge"></span>
          </div>
        </header>

        <div class="content-area">
          <!-- Dashboard Section -->
          <section id="dashboard-section" class="section active">
            <div class="stats-grid">
              <div class="stat-card clickable" data-target="posts-section">
                <h3 data-i18n="dashboard.activePosts">Aktive Beitr√§ge</h3>
                <p class="stat-number" id="active-posts">0</p>
              </div>
              <div class="stat-card clickable" data-target="posts-section">
                <h3 data-i18n="dashboard.scheduledPosts">Geplante Beitr√§ge</h3>
                <p class="stat-number" id="scheduled-posts">0</p>
              </div>
              <div class="stat-card clickable" data-target="categories-section">
                <h3 data-i18n="dashboard.categories">Kategorien</h3>
                <p class="stat-number" id="total-categories">0</p>
              </div>
              <div class="stat-card clickable" data-target="displays-section">
                <h3 data-translate="nav.displays">Displays</h3>
                <p class="stat-number"><span id="total-displays">0</span> <span style="font-size: 0.5em; color: #6c757d; font-weight: 400;" data-translate="displays.licensed">/ 2 lizenziert</span></p>
              </div>
              <div class="stat-card clickable" data-target="media-section">
                <h3 data-i18n="dashboard.media">Medien</h3>
                <p class="stat-number" id="total-media">0</p>
              </div>
            </div>

            <div class="quick-actions">
              <h2 data-i18n="dashboard.quickActions">Schnellaktionen</h2>
              <button class="btn btn-primary" id="quickNewPostBtn" data-i18n="dashboard.newPost">
                Neuer Beitrag
              </button>
              <button
                class="btn btn-secondary"
                id="openDisplayBtn"
                data-i18n="dashboard.openDisplay"
              >
                Display √∂ffnen
              </button>
              <button
                class="btn btn-accent"
                id="openPresentationBtn"
                data-i18n="dashboard.presentationMode"
                title="Manuelle Navigation mit Pfeiltasten oder Mausklick"
              >
                Vortragsmodus
              </button>
            </div>
          </section>

          <!-- Posts Section -->
          <section id="posts-section" class="section">
            <div class="section-header">
              <h2>Beitr√§ge verwalten</h2>
              <div>
                <button class="btn btn-success" id="showPostFormBtn">+ Neuer Beitrag</button>
                <button class="btn btn-danger" id="deleteAllPostsBtn" style="margin-left: 10px;">Alle l√∂schen</button>
              </div>
            </div>

            <div id="post-form" class="form-container" style="display: none">
              <form id="postForm">
                <div class="form-row">
                  <div class="form-group">
                    <label for="post-title" data-translate="form.title">Titel *</label>
                    <input type="text" id="post-title" name="title" required />
                  </div>

                  <div class="form-group">
                    <label for="post-type" data-translate="form.type">Typ *
                      <span class="info-tooltip-wrapper tooltip-below">
                        <button type="button" class="info-tooltip-btn" aria-label="Info">i</button>
                        <div class="info-tooltip-content">
                          <strong>Beitragstypen:</strong>
                          <ul>
                            <li><strong>Text</strong> ‚Äì Einfache Textnachricht (Zeilenumbr√ºche werden √ºbernommen)</li>
                            <li><strong>Bild</strong> ‚Äì Bild-Upload (JPG, PNG, GIF, WebP)</li>
                            <li><strong>Video</strong> ‚Äì Video-Datei oder YouTube/Vimeo-URL</li>
                            <li><strong>HTML</strong> ‚Äì Freie HTML-Gestaltung mit CSS</li>
                            <li><strong>PowerPoint</strong> ‚Äì PPTX wird als Folien angezeigt</li>
                            <li><strong>PDF</strong> ‚Äì PDF-Dokument seitenweise</li>
                            <li><strong>Word</strong> ‚Äì DOCX wird konvertiert</li>
                          </ul>
                        </div>
                      </span>
                    </label>
                    <select id="post-type" name="content_type" required>
                      <option value="text" data-translate="type.text">Text</option>
                      <option value="image" data-translate="type.image">Bild</option>
                      <option value="video" data-translate="type.video">Video</option>
                      <option value="html" data-translate="type.html">HTML</option>
                      <option value="presentation" data-translate="type.presentation">PowerPoint Pr√§sentation</option>
                      <option value="pdf" data-translate="type.pdf">PDF Dokument</option>
                      <option value="word" data-translate="type.word">Word Dokument</option>
                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label for="post-category" data-translate="form.category">Kategorie</label>
                  <select id="post-category" name="category_id">
                    <option value="" data-translate="form.noCategory">-- Keine Kategorie --</option>
                  </select>
                </div>

                <!-- Display-Auswahl -->
                <div class="form-group">
                  <label class="form-group-label" data-translate="displays.assignmentLabel">Display-Zuweisung</label>

                  <div class="display-mode-cards">
                    <label class="display-mode-card" for="display-mode-all">
                      <input type="radio" name="display_mode" value="all" id="display-mode-all" checked />
                      <div>
                        <div class="display-mode-card-label" data-translate="displays.modeAll">Alle Displays</div>
                        <div class="display-mode-card-hint" data-translate="displays.modeAllHint">Auf allen Displays anzeigen</div>
                      </div>
                    </label>
                    <label class="display-mode-card" for="display-mode-specific">
                      <input type="radio" name="display_mode" value="specific" id="display-mode-specific" />
                      <div>
                        <div class="display-mode-card-label" data-translate="displays.modeSpecific">Spezifische Displays</div>
                        <div class="display-mode-card-hint" data-translate="displays.modeSpecificHint">Nur bestimmte Displays</div>
                      </div>
                    </label>
                  </div>

                  <!-- Display Selection Container -->
                  <div id="display-selection-container" class="display-selection-box" style="display: none">
                    <div class="display-selection-box-header" data-translate="displays.selectDisplays">Displays ausw√§hlen:</div>
                    <div id="displays-checkboxes">
                      <p class="text-muted" style="text-align: center; padding: 1rem;" data-translate="liveData.loadingDisplays">Lade Displays...</p>
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <label for="post-content" data-translate="form.content">Inhalt
                    <span class="info-tooltip-wrapper">
                      <button type="button" class="info-tooltip-btn" aria-label="Info">i</button>
                      <div class="info-tooltip-content">
                        <strong>Textformatierung:</strong>
                        <ul>
                          <li><code>Enter</code> = N√§chste Zeile / Absatz</li>
                          <li>Bei Typ <strong>Text</strong>: Einfacher Text ohne HTML. Zeilenumbr√ºche werden automatisch √ºbernommen.</li>
                          <li>Bei Typ <strong>HTML</strong>: Sie k√∂nnen HTML-Tags verwenden, z.B. <code>&lt;br&gt;</code> f√ºr Zeilenumbruch, <code>&lt;b&gt;</code> f√ºr fett, <code>&lt;i&gt;</code> f√ºr kursiv.</li>
                          <li>Bilder/Videos: Hier die Beschreibung eintragen. Die Mediendatei wird separat hochgeladen.</li>
                        </ul>
                      </div>
                    </span>
                  </label>
                  <textarea id="post-content" name="content" rows="5"></textarea>
                  <!-- KI-Assistent -->
                  <div id="ai-assistant" class="ai-assistant" style="display: none;">
                    <div class="ai-toolbar">
                      <button type="button" class="ai-btn" data-action="generate" title="Text aus Stichworten generieren">
                        <span class="ai-btn-icon">&#9998;</span> Generieren
                      </button>
                      <button type="button" class="ai-btn" data-action="improve" title="Bestehenden Text verbessern">
                        <span class="ai-btn-icon">&#10038;</span> Verbessern
                      </button>
                      <button type="button" class="ai-btn" data-action="shorten" title="Text k√ºrzen">
                        <span class="ai-btn-icon">&#9986;</span> K√ºrzen
                      </button>
                      <button type="button" class="ai-btn ai-btn-translate" data-action="translate" title="Text √ºbersetzen">
                        <span class="ai-btn-icon">‚áÑ</span> √úbersetzen
                        <select id="ai-target-language" class="ai-lang-select" onclick="event.stopPropagation()">
                          <option value="Deutsch">DE</option>
                          <option value="Englisch" selected>EN</option>
                          <option value="Franz√∂sisch">FR</option>
                          <option value="Spanisch">ES</option>
                          <option value="Italienisch">IT</option>
                          <option value="T√ºrkisch">TR</option>
                          <option value="Polnisch">PL</option>
                          <option value="Arabisch">AR</option>
                        </select>
                      </button>
                    </div>
                    <div id="ai-status" class="ai-status" style="display: none;">
                      <span class="ai-spinner"></span>
                      <span id="ai-status-text">KI denkt nach...</span>
                    </div>
                  </div>
                </div>

                <div class="form-group" id="upload-section" style="display: none;">
                  <label style="font-weight: 600; margin-bottom: 0.5rem; display: block;" data-translate="form.uploadContent">Inhalte hochladen</label>
                  
                  <!-- Option 1: Word/PDF Import (nur bei Text/HTML) -->
                  <div id="word-pdf-import" style="margin-bottom: 1rem;">
                    <button type="button" class="btn btn-secondary" id="import-document-btn" style="width: 100%; font-size: 0.95rem;" data-translate="form.importDocument">
                      ‚Üë Word/PDF importieren
                    </button>
                    <small style="color: #666; display: block; margin-top: 0.5rem; text-align: center;" data-translate="form.importDocumentHint">
                      Importieren Sie .docx oder .pdf Dateien (max. 10MB)
                    </small>
                  </div>

                  <!-- Option 2: Datei hochladen (nur bei anderen Typen) -->
                  <div id="file-upload-section" style="display: none;">
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                      <button type="button" class="btn btn-secondary" id="trigger-file-upload" style="font-size: 0.9rem; display: inline-block;" data-translate="form.uploadFile">
                        ‚Üë Datei hochladen
                      </button>
                      <small style="color: #666; align-self: center;" data-translate="form.uploadFileHint">
                        Bilder, Videos, Audio, PDFs, Word, PowerPoint (max. 2 GB)
                      </small>
                    </div>
                    <input
                      type="file"
                      id="media-file"
                      name="media_file"
                      accept="image/*,video/*,audio/*,.pdf,.doc,.docx,.pptx,.ppt,.odp"
                      style="display: none;"
                    />
                    <div id="upload-progress" style="display: none; margin-top: 0.5rem">
                      <div style="background: #e0e0e0; border-radius: 4px; height: 20px; overflow: hidden;">
                        <div id="upload-progress-bar" style="background: #007bff; height: 100%; width: 0%; transition: width 0.3s"></div>
                      </div>
                      <small id="upload-status" style="color: #007bff" data-translate="form.uploading">Uploading...</small>
                    </div>
                  </div>

                  <!-- Option 3: Medien-URL (nur bei anderen Typen) -->
                  <div id="media-url-section" style="margin-top: 1rem; display: none;">
                    <label for="media-url" style="font-weight: 500; margin-bottom: 0.5rem; display: block;" data-translate="form.mediaUrl">Medien-URL (oder Datei hochladen)</label>
                    <input
                      type="text"
                      id="media-url"
                      name="media_url"
                      data-translate-placeholder="form.mediaUrlPlaceholder"
                      placeholder="https://... oder /uploads/originals/..."
                      style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;"
                    />
                    <small style="color: #666; display: block; margin-top: 0.5rem;" data-translate="form.mediaUrlHint">
                      YouTube/Vimeo URLs werden automatisch als Video eingebettet
                    </small>
                    
                    <!-- Offline-Download Option (nur f√ºr externe Videos) -->
                    <div id="offline-download-section" style="margin-top: 1rem; display: none;">
                      <label class="checkbox-label" style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" id="download-video-offline" />
                        <span data-translate="form.offlineDownload">üì• Video offline verf√ºgbar machen</span>
                      </label>
                      <small style="color: #666; display: block; margin-top: 0.25rem; margin-left: 1.5rem;" data-translate="form.offlineDownloadHint">
                        L√§dt das Video automatisch herunter f√ºr bessere Performance und Offline-Nutzung
                      </small>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="display-duration" data-translate="form.displayDuration">Anzeigedauer (Sek.)
                      <span class="info-tooltip-wrapper">
                        <button type="button" class="info-tooltip-btn" aria-label="Info">i</button>
                        <div class="info-tooltip-content">
                          Wie lange dieser Beitrag auf dem Display angezeigt wird, bevor zum n√§chsten gewechselt wird. Standard: 60 Sekunden. Bei Videos wird automatisch die Videol√§nge verwendet.
                        </div>
                      </span>
                    </label>
                    <input
                      type="number"
                      id="display-duration"
                      name="display_duration"
                      value="60"
                      min="1"
                    />
                  </div>

                  <div class="form-group">
                    <label for="priority" data-translate="form.priority">Priorit√§t (0-100)
                      <span class="info-tooltip-wrapper">
                        <button type="button" class="info-tooltip-btn" aria-label="Info">i</button>
                        <div class="info-tooltip-content">
                          Bestimmt die Reihenfolge der Beitr√§ge. <strong>H√∂here Zahlen = h√§ufiger angezeigt</strong>. Beitr√§ge mit Priorit√§t 0 werden normal rotiert. Wert 100 = h√∂chste Priorit√§t.
                        </div>
                      </span>
                    </label>
                    <input type="number" id="priority" name="priority" value="0" min="0" max="100" />
                  </div>

                  <div class="form-group">
                    <label for="show-title" style="display: block; margin-bottom: 0.5rem;">Titel anzeigen</label>
                    <div class="toggle-switch">
                      <input type="checkbox" name="show_title" id="show-title" class="toggle-input" />
                      <label for="show-title" class="toggle-label">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="blend-effect" data-translate="form.blendEffect">√úbergangseffekt</label>
                    <select id="blend-effect" name="blend_effect">
                      <option value="" data-translate="form.blendEffectNone">Kein Effekt</option>
                      <option value="fade" data-translate="form.blendEffectFade">Fade (√úberblenden)</option>
                      <option value="slide-left" data-translate="form.blendEffectSlideLeft">Slide Left (Nach links)</option>
                      <option value="slide-right" data-translate="form.blendEffectSlideRight">Slide Right (Nach rechts)</option>
                      <option value="slide-up" data-translate="form.blendEffectSlideUp">Slide Up (Nach oben)</option>
                      <option value="slide-down" data-translate="form.blendEffectSlideDown">Slide Down (Nach unten)</option>
                      <option value="zoom-in" data-translate="form.blendEffectZoomIn">Zoom In (Hineinzoomen)</option>
                      <option value="zoom-out" data-translate="form.blendEffectZoomOut">Zoom Out (Herauszoomen)</option>
                    </select>
                    <small style="color: #666; display: block; margin-top: 0.25rem" data-translate="form.blendEffectHint">W√§hlen Sie einen √úbergangseffekt zum n√§chsten Beitrag</small>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="start-date" data-translate="form.startDate">Start-Datum
                      <span class="info-tooltip-wrapper">
                        <button type="button" class="info-tooltip-btn" aria-label="Info">i</button>
                        <div class="info-tooltip-content">
                          <strong>Zeitsteuerung:</strong> Beitrag wird erst ab diesem Datum/Uhrzeit auf dem Display angezeigt. Leer lassen = sofort sichtbar. Zusammen mit End-Datum k√∂nnen Sie zeitlich begrenzte Beitr√§ge planen.
                        </div>
                      </span>
                    </label>
                    <input type="datetime-local" id="start-date" name="start_date" />
                  </div>

                  <div class="form-group">
                    <label for="end-date" data-translate="form.endDate">End-Datum</label>
                    <input type="datetime-local" id="end-date" name="end_date" />
                  </div>
                </div>

                <!-- Hintergrundmusik (nur f√ºr nicht-Video-Inhalte) -->
                <div class="form-group background-music-section" id="background-music-section">
                  <label> <span class="settings-icon">‚ô™</span> <span data-translate="form.backgroundMusicSection">Hintergrundmusik (optional)</span> </label>
                  <small style="color: #666; display: block; margin-bottom: 0.5rem" data-translate="form.backgroundMusicHint">
                    Nur f√ºr Text, Bild und HTML-Inhalte. Bei Videos wird der Original-Ton verwendet.
                  </small>
                  <div class="form-row">
                    <div class="form-group" style="flex: 2">
                      <label for="background-music-file" data-translate="form.musicFile">Musik-Datei</label>
                      <input
                        type="file"
                        id="background-music-file"
                        name="background_music_file"
                        accept="audio/*,.mp3,.wav,.ogg,.m4a"
                      />
                      <small style="color: #666">Unterst√ºtzt: MP3, WAV, OGG, M4A</small>
                    </div>
                    <div class="form-group" style="flex: 1">
                      <label for="background-music-volume" data-translate="form.musicVolume">Lautst√§rke</label>
                      <div class="volume-control">
                        <input
                          type="range"
                          id="background-music-volume"
                          name="background_music_volume"
                          min="0"
                          max="100"
                          value="50"
                        />
                        <span id="volume-display">50%</span>
                      </div>
                    </div>
                  </div>
                  <div id="current-music-info" style="display: none; margin-top: 0.5rem">
                    <small style="color: #28a745">
                      <span class="btn-icon">‚ô™</span> Aktuelle Musik:
                      <span id="current-music-name"></span>
                      <button
                        type="button"
                        class="btn btn-sm btn-secondary"
                        id="remove-music-btn"
                        style="margin-left: 0.5rem"
                      >
                        Entfernen
                      </button>
                      <button
                        type="button"
                        class="btn btn-sm btn-secondary"
                        id="preview-music-btn"
                        style="margin-left: 0.25rem"
                      >
                        Vorschau
                      </button>
                    </small>
                  </div>
                  <audio id="music-preview" style="display: none"></audio>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="sound-enabled" style="display: block; margin-bottom: 0.5rem;" data-translate="form.soundEnabled">Sound aktiviert</label>
                    <div class="toggle-switch">
                      <input type="checkbox" name="sound_enabled" id="sound-enabled" checked class="toggle-input" />
                      <label for="sound-enabled" class="toggle-label">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="is-active" style="display: block; margin-bottom: 0.5rem;">Aktiv</label>
                    <div class="toggle-switch">
                      <input type="checkbox" name="is_active" id="is-active" checked class="toggle-input" />
                      <label for="is-active" class="toggle-label">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </div>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary" data-translate="btn.savePost">Beitrag speichern</button>
                  <button type="button" class="btn btn-secondary" id="hidePostFormBtn" data-translate="btn.cancel">
                    Abbrechen
                  </button>
                </div>
              </form>
            </div>

            <div class="posts-list" id="posts-list">
              <!-- Wird dynamisch gef√ºllt -->
            </div>

          </section>

          <!-- Categories Section -->
          <section id="categories-section" class="section">
            <div class="section-header">
              <h2>Kategorien verwalten</h2>
              <button class="btn btn-primary" id="showCategoryFormBtn" data-translate="btn.newCategory">+ Neue Kategorie</button>
            </div>

            <div id="category-form" class="form-container" style="display: none">
              <h2>+ Neue Kategorie</h2>
              <form id="categoryForm">
                <div class="form-group">
                  <label for="category-name" data-translate="category.name">Name *</label>
                  <input type="text" id="category-name" name="name" required />
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="category-color" data-translate="category.color">Farbe</label>
                    <input type="color" id="category-color" name="color" value="#4caf50" />
                  </div>

                  <div class="form-group">
                    <label for="category-icon" data-translate="category.icon">Icon</label>
                    <select id="category-icon" name="icon" class="icon-select">
                      <optgroup label="Geometrische Formen">
                        <option value="‚óè">‚óè Kreis (gef√ºllt)</option>
                        <option value="‚óã">‚óã Kreis (leer)</option>
                        <option value="‚óâ">‚óâ Kreis mit Punkt</option>
                        <option value="‚óé">‚óé Doppelkreis</option>
                        <option value="‚ñ†" selected>‚ñ† Quadrat (gef√ºllt)</option>
                        <option value="‚ñ°">‚ñ° Quadrat (leer)</option>
                        <option value="‚ñ™">‚ñ™ Kleines Quadrat</option>
                        <option value="‚ñ´">‚ñ´ Kleines Quadrat (leer)</option>
                        <option value="‚óÜ">‚óÜ Raute (gef√ºllt)</option>
                        <option value="‚óá">‚óá Raute (leer)</option>
                        <option value="‚óà">‚óà Raute mit Punkt</option>
                        <option value="‚ñ≤">‚ñ≤ Dreieck hoch</option>
                        <option value="‚ñ≥">‚ñ≥ Dreieck hoch (leer)</option>
                        <option value="‚ñº">‚ñº Dreieck runter</option>
                        <option value="‚ñΩ">‚ñΩ Dreieck runter (leer)</option>
                        <option value="‚óÄ">‚óÄ Dreieck links</option>
                        <option value="‚ñ∂">‚ñ∂ Dreieck rechts</option>
                        <option value="‚¨ü">‚¨ü Sechseck</option>
                        <option value="‚¨¢">‚¨¢ Sechseck (gef√ºllt)</option>
                      </optgroup>
                      <optgroup label="Sterne & Symbole">
                        <option value="‚òÖ">‚òÖ Stern (gef√ºllt)</option>
                        <option value="‚òÜ">‚òÜ Stern (leer)</option>
                        <option value="‚ú¶">‚ú¶ Stern 4-zackig</option>
                        <option value="‚úß">‚úß Stern 4-zackig (leer)</option>
                        <option value="‚ú™">‚ú™ Stern im Kreis</option>
                        <option value="‚ú´">‚ú´ Stern offen</option>
                        <option value="‚ú¨">‚ú¨ Stern gef√ºllt</option>
                        <option value="‚ú≠">‚ú≠ Stern umrandet</option>
                        <option value="‚úÆ">‚úÆ Stern 6-zackig</option>
                        <option value="‚úØ">‚úØ Stern 6-zackig (leer)</option>
                      </optgroup>
                      <optgroup label="Pfeile & Zeiger">
                        <option value="‚ñ∏">‚ñ∏ Pfeil rechts</option>
                        <option value="‚ñπ">‚ñπ Pfeil rechts (leer)</option>
                        <option value="‚ñ∫">‚ñ∫ Pfeil rechts (gro√ü)</option>
                        <option value="‚ñª">‚ñª Pfeil rechts (gro√ü, leer)</option>
                        <option value="‚Üí">‚Üí Pfeil rechts (d√ºnn)</option>
                        <option value="‚áí">‚áí Doppelpfeil</option>
                        <option value="‚û§">‚û§ Pfeilspitze</option>
                        <option value="‚ûî">‚ûî Pfeil breit</option>
                      </optgroup>
                      <optgroup label="H√§kchen & Kreuze">
                        <option value="‚úì">‚úì H√§kchen</option>
                        <option value="‚úî">‚úî H√§kchen (fett)</option>
                        <option value="‚úï">‚úï Kreuz</option>
                        <option value="‚úñ">‚úñ Kreuz (fett)</option>
                        <option value="‚úó">‚úó Kreuz (Ballot)</option>
                        <option value="‚úò">‚úò Kreuz (Ballot, fett)</option>
                      </optgroup>
                      <optgroup label="Info & Status">
                        <option value="‚Ñπ">‚Ñπ Info</option>
                        <option value="‚ö†">‚ö† Warnung</option>
                        <option value="‚ö°">‚ö° Blitz</option>
                        <option value="‚öô">‚öô Zahnrad</option>
                        <option value="‚öë">‚öë Flagge</option>
                        <option value="‚öê">‚öê Flagge (leer)</option>
                        <option value="‚ô¶">‚ô¶ Karo</option>
                        <option value="‚ô†">‚ô† Pik</option>
                        <option value="‚ô£">‚ô£ Kreuz</option>
                        <option value="‚ô•">‚ô• Herz</option>
                      </optgroup>
                      <optgroup label="Weitere Symbole">
                        <option value="‚òÄ">‚òÄ Sonne</option>
                        <option value="‚òÅ">‚òÅ Wolke</option>
                        <option value="‚òÇ">‚òÇ Regenschirm</option>
                        <option value="‚òé">‚òé Telefon</option>
                        <option value="‚òê">‚òê Checkbox (leer)</option>
                        <option value="‚òë">‚òë Checkbox (angehakt)</option>
                        <option value="‚òí">‚òí Checkbox (gekreuzt)</option>
                        <option value="‚òõ">‚òõ Zeigefinger</option>
                        <option value="‚òû">‚òû Zeigefinger (leer)</option>
                        <option value="‚ô™">‚ô™ Note</option>
                        <option value="‚ô´">‚ô´ Noten</option>
                        <option value="‚åÇ">‚åÇ Haus</option>
                        <option value="‚åò">‚åò Command</option>
                        <option value="‚è±">‚è± Stoppuhr</option>
                        <option value="‚è∞">‚è∞ Wecker</option>
                      </optgroup>
                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label for="category-description" data-translate="category.description">Beschreibung</label>
                  <textarea
                    id="category-description"
                    name="description"
                    rows="2"
                    data-translate-placeholder="category.descriptionPlaceholder"
                    placeholder="Optionale Beschreibung..."
                  ></textarea>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary" data-translate="btn.saveCategory">Kategorie erstellen</button>
                  <button type="button" class="btn btn-secondary" id="hideCategoryFormBtn" data-translate="btn.cancel">
                    Abbrechen
                  </button>
                </div>
              </form>
            </div>

            <div class="categories-list" id="categories-list">
              <!-- Wird dynamisch gef√ºllt -->
            </div>
          </section>

          <!-- Displays Section -->
          <section id="displays-section" class="section">
            <div class="section-header">
              <h2 data-translate="displays.title">Display-Verwaltung</h2>
              <div style="display: flex; align-items: center; gap: 1rem;">
                <span id="display-license-info" class="license-info-badge">Lizenz: <strong><span id="display-license-used">0</span> / 2</strong> Displays</span>
                <button class="btn btn-primary" id="showDisplayFormBtn" data-translate="displays.newDisplay">+ Neues Display</button>
              </div>
            </div>

            <div id="display-license-warning" class="license-warning" style="display: none">
              <strong data-translate="displays.licenseWarning">Display-Lizenzlimit erreicht</strong>
              <p style="margin: 0.5rem 0 0;">Ihre aktuelle Lizenz umfasst 2 Displays. Um weitere Displays hinzuzuf√ºgen, kontaktieren Sie bitte den Vertrieb unter <a href="mailto:kontakt@it-westfalen.de" class="inline-link">kontakt@it-westfalen.de</a>.</p>
            </div>

            <div id="display-form" class="form-container" style="display: none">
              <h2>+ Neues Display</h2>
              <form id="displayForm">
                <div class="form-group">
                  <label for="display-name" data-translate="displays.name">Display-Name *</label>
                  <input type="text" id="display-name" name="name" required placeholder="z.B. Empfangsbereich" data-translate-placeholder="displays.namePlaceholder" />
                </div>

                <div class="form-group">
                  <label for="display-identifier" data-translate="displays.identifier">Identifier *
                    <span class="info-tooltip-wrapper tooltip-below">
                      <button type="button" class="info-tooltip-btn" aria-label="Info">i</button>
                      <div class="info-tooltip-content" data-translate="displays.identifierTooltip">
                        Eindeutiger technischer Name f√ºr die Display-URL. Wird in der Adressleiste verwendet: <code>/display/mein-display</code>. Erlaubt: Buchstaben, Zahlen, Bindestriche, Unterstriche.
                      </div>
                    </span>
                  </label>
                  <input 
                    type="text" 
                    id="display-identifier" 
                    name="identifier" 
                    required 
                    pattern="[a-zA-Z0-9_-]+"
                    placeholder="z.B. empfangsbereich-1" 
                    title="Nur Buchstaben, Zahlen, Bindestriche und Unterstriche"
                    data-translate-placeholder="displays.identifierPlaceholder"
                  />
                  <small style="color: #6c757d;" data-translate="displays.identifierHint">Eindeutiger Identifier f√ºr die Display-URL (nur a-z, 0-9, -, _)</small>
                </div>

                <div class="form-group">
                  <label for="display-description" data-translate="displays.description">Beschreibung</label>
                  <textarea 
                    id="display-description" 
                    name="description" 
                    rows="3"
                    placeholder="Optionale Beschreibung oder Standort des Displays"
                    data-translate-placeholder="displays.descriptionPlaceholder"
                  ></textarea>
                </div>

                <div class="form-group">
                  <label>
                    <input type="checkbox" id="display-isActive" name="isActive" checked />
                    <span data-translate="displays.isActive">Display ist aktiv</span>
                  </label>
                  <small style="color: #6c757d; display: block; margin-top: 0.25rem;" data-translate="displays.isActiveHint">Inaktive Displays erhalten keine Beitr√§ge</small>
                </div>

                <div class="form-group">
                  <label style="font-weight: 600; margin-bottom: 0.5rem; display: block;" data-translate="displays.liveDataTitle">Live-Daten auf diesem Display</label>
                  <div style="display: flex; gap: 2rem; margin-top: 0.25rem;">
                    <label>
                      <input type="checkbox" id="display-showTransitData" name="showTransitData" checked />
                      <span data-translate="displays.showTransitData">√ñPNV-Abfahrten anzeigen</span>
                    </label>
                    <label>
                      <input type="checkbox" id="display-showTrafficData" name="showTrafficData" checked />
                      <span data-translate="displays.showTrafficData">Autobahn-Verkehr anzeigen</span>
                    </label>
                  </div>
                  <small style="color: #6c757d; display: block; margin-top: 0.25rem;" data-translate="displays.liveDataHint">Steuert, ob Live-Daten-Widgets auf diesem Display eingeblendet werden</small>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary" data-translate="displays.create">Display erstellen</button>
                  <button type="button" class="btn btn-secondary" id="hideDisplayFormBtn" data-translate="btn.cancel">
                    Abbrechen
                  </button>
                </div>
              </form>
            </div>

            <div class="displays-list" id="displays-list">
              <!-- Wird dynamisch gef√ºllt -->
            </div>
          </section>

          <!-- Users Section -->
          <section id="users-section" class="section">
            <div class="section-header">
              <h2>Benutzer verwalten</h2>
              <button class="btn btn-primary" id="showUserFormBtn" data-translate="btn.newUser">+ Neuer Benutzer</button>
            </div>

            <div id="user-form" class="form-container" style="display: none">
              <form id="userForm">
                <div class="form-row">
                  <div class="form-group">
                    <label for="user-firstName" data-translate="users.firstName">Vorname *</label>
                    <input type="text" id="user-firstName" name="firstName" required />
                  </div>

                  <div class="form-group">
                    <label for="user-lastName" data-translate="users.lastName">Nachname *</label>
                    <input type="text" id="user-lastName" name="lastName" required />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="user-email" data-translate="users.email">E-Mail *</label>
                    <input type="email" id="user-email" name="email" required />
                  </div>

                  <div class="form-group">
                    <label for="user-role" data-translate="users.role">Rolle *</label>
                    <select id="user-role" name="role" required>
                      <option value="viewer" data-translate="role.viewer">Betrachter</option>
                      <option value="editor" data-translate="role.editor">Editor</option>
                      <option value="admin" data-translate="role.admin">Administrator</option>
                      <option value="display" data-translate="role.display">Display</option>
                    </select>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="user-password" data-translate="users.password">Passwort *</label>
                    <input type="password" id="user-password" name="password" minlength="6" autocomplete="new-password" />
                    <small class="form-hint"
                      >Min. 6 Zeichen (leer lassen f√ºr keine √Ñnderung bei Bearbeitung)</small
                    >
                  </div>

                  <div class="form-group">
                    <label for="user-isActive" data-translate="common.status">Status</label>
                    <select id="user-isActive" name="isActive">
                      <option value="true" data-translate="common.active">Aktiv</option>
                      <option value="false" data-translate="common.inactive">Inaktiv</option>
                    </select>
                  </div>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary" data-translate="btn.saveUser">Benutzer speichern</button>
                  <button type="button" class="btn btn-secondary" id="hideUserFormBtn" data-translate="btn.cancel">
                    Abbrechen
                  </button>
                </div>
              </form>
            </div>

            <div class="users-list" id="users-list">
              <!-- Wird dynamisch gef√ºllt -->
            </div>
          </section>

          <!-- Live-Daten Section -->
          <section id="livedata-section" class="section">
            <h2 data-translate="liveData.sectionTitle">Live-Daten (√ñPNV, Verkehr & Wetter)</h2>

            <!-- Transit / √ñPNV Konfiguration -->
            <div class="settings-card">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><rect x="2" y="2" width="12" height="9" rx="2"/><line x1="2" y1="7" x2="14" y2="7"/><line x1="5" y1="11" x2="4" y2="14"/><line x1="11" y1="11" x2="12" y2="14"/></svg></span> <span data-translate="liveData.transit.title">√ñPNV-Abfahrten</span></h3>
              <p class="settings-description" data-translate="liveData.transit.description">
                Konfigurieren Sie die Anzeige von Live-Abfahrtszeiten f√ºr Busse und Bahnen in Ihrer N√§he.
              </p>
              <div class="settings-form">
                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="transit-enabled" />
                    <span data-translate="liveData.transit.enable">√ñPNV-Abfahrten auf Display anzeigen</span>
                  </label>
                </div>

                <div id="transit-config" style="display: none">
                  <div class="form-group">
                    <label for="transit-station-search" data-translate="liveData.transit.stationSearch">Station suchen</label>
                    <div class="search-input-group">
                      <input type="text" id="transit-station-search" placeholder="z.B. Hamburg Hbf, Berlin Alexanderplatz..." data-translate-placeholder="liveData.transit.stationPlaceholder" />
                      <button type="button" class="btn btn-secondary btn-sm" id="transit-search-btn" data-translate="common.search">Suchen</button>
                    </div>
                  </div>

                  <div id="transit-search-results" class="search-results-list" style="display: none"></div>

                  <div id="transit-selected-station" class="selected-station-card" style="display: none">
                    <div class="station-info">
                      <span class="station-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="16" height="16" aria-hidden="true"><circle cx="8" cy="6" r="2.5"/><path d="M8 15C8 15 3 10 3 6a5 5 0 0 1 10 0c0 4-5 9-5 9z"/></svg></span>
                      <div>
                        <strong id="transit-station-name">‚Äì</strong>
                        <small id="transit-station-id" class="text-muted"></small>
                      </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-danger" id="transit-remove-station" data-translate="liveData.transit.remove">Entfernen</button>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label for="transit-max-departures" data-translate="liveData.transit.maxDepartures">Maximale Abfahrten</label>
                      <input type="number" id="transit-max-departures" value="10" min="3" max="30" />
                    </div>
                    <div class="form-group">
                      <label for="transit-duration" data-translate="liveData.transit.timeWindow">Zeitfenster (Minuten)</label>
                      <input type="number" id="transit-duration" value="60" min="10" max="180" />
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="transit-refresh-interval" data-translate="liveData.transit.refreshInterval">Aktualisierungsintervall (Sekunden)</label>
                    <input type="number" id="transit-refresh-interval" value="30" min="10" max="300" />
                  </div>

                  <div class="form-group">
                    <label data-translate="liveData.transit.filterTitle">Verkehrsmittel filtern</label>
                    <div class="transport-filter-grid">
                      <label class="checkbox-label"><input type="checkbox" id="filter-bus" checked /><span data-translate="liveData.transit.bus">Bus</span></label>
                      <label class="checkbox-label"><input type="checkbox" id="filter-suburban" checked /><span data-translate="liveData.transit.suburban">S-Bahn</span></label>
                      <label class="checkbox-label"><input type="checkbox" id="filter-subway" checked /><span data-translate="liveData.transit.subway">U-Bahn</span></label>
                      <label class="checkbox-label"><input type="checkbox" id="filter-tram" checked /><span data-translate="liveData.transit.tram">Tram</span></label>
                      <label class="checkbox-label"><input type="checkbox" id="filter-regional" checked /><span data-translate="liveData.transit.regional">Regionalzug</span></label>
                      <label class="checkbox-label"><input type="checkbox" id="filter-national" checked /><span data-translate="liveData.transit.national">Fernzug</span></label>
                      <label class="checkbox-label"><input type="checkbox" id="filter-ferry" /><span data-translate="liveData.transit.ferry">F√§hre</span></label>
                    </div>
                  </div>

                  <div class="form-group">
                    <label data-translate="liveData.displayAssignment">Auf welchen Displays anzeigen?</label>
                    <div id="transit-display-checkboxes" class="transport-filter-grid">
                      <p class="text-muted" data-translate="liveData.loadingDisplays">Lade Displays...</p>
                    </div>
                  </div>
                </div>

                <button class="btn btn-primary" id="saveTransitSettings" data-translate="liveData.saveSettings">Einstellungen speichern</button>
                <button class="btn btn-secondary" id="previewTransitData" style="margin-left: 0.5rem" data-translate="liveData.preview">Vorschau</button>
              </div>
            </div>

            <!-- Live-Vorschau √ñPNV -->
            <div id="transit-preview-card" class="settings-card" style="display: none">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><rect x="2" y="2" width="12" height="12" rx="1"/><line x1="5" y1="6" x2="11" y2="6"/><line x1="5" y1="8.5" x2="11" y2="8.5"/><line x1="5" y1="11" x2="8" y2="11"/></svg></span> <span data-translate="liveData.transit.previewTitle">√ñPNV-Vorschau</span></h3>
              <div id="transit-preview-content" class="live-preview-container">
                <p class="text-muted" data-translate="liveData.transit.previewHint">Klicken Sie auf "Vorschau" um Live-Abfahrten zu laden.</p>
              </div>
            </div>

            <!-- Verkehr / Autobahn Konfiguration -->
            <div class="settings-card">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><path d="M4 14L6 2M10 2L12 14"/><line x1="8" y1="4" x2="8" y2="6"/><line x1="8" y1="8" x2="8" y2="10"/></svg></span> <span data-translate="liveData.traffic.title">Autobahn-Verkehrslage</span></h3>
              <p class="settings-description" data-translate="liveData.traffic.description">
                Zeigen Sie Staumeldungen, Baustellen und Verkehrswarnungen f√ºr ausgew√§hlte Autobahnen an.
              </p>
              <div class="settings-form">
                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="traffic-enabled" />
                    <span data-translate="liveData.traffic.enable">Verkehrslage auf Display anzeigen</span>
                  </label>
                </div>

                <div id="traffic-config" style="display: none">
                  <div class="form-group">
                    <label for="traffic-location-preset" data-translate="liveData.traffic.locationPreset">Standort-Vorauswahl</label>
                    <select id="traffic-location-preset">
                      <option value="" data-translate="liveData.traffic.manualSelect">‚Äî Manuell ausw√§hlen ‚Äî</option>
                      <option value="ahlen" selected>Ahlen (A1, A2, A43, A44)</option>
                      <option value="muenster">M√ºnster (A1, A2, A43)</option>
                      <option value="dortmund">Dortmund (A1, A2, A40, A44, A45)</option>
                      <option value="bielefeld">Bielefeld (A2, A33)</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="traffic-highway-select" data-translate="liveData.traffic.highwaySelect">Autobahnen ausw√§hlen</label>
                    <div class="highway-select-wrapper">
                      <select id="traffic-highway-select" multiple size="6">
                        <option value="loading" disabled>Lade Autobahnen...</option>
                      </select>
                      <small data-translate="liveData.traffic.multiSelectHint">Halten Sie Strg/Cmd gedr√ºckt f√ºr Mehrfachauswahl oder nutzen Sie die Standort-Vorauswahl</small>
                    </div>
                  </div>

                  <div id="traffic-selected-highways" class="selected-highways-list"></div>

                  <div class="form-row">
                    <div class="form-group">
                      <label for="traffic-refresh-interval" data-translate="liveData.traffic.refreshInterval">Aktualisierung (Minuten)</label>
                      <input type="number" id="traffic-refresh-interval" value="5" min="1" max="60" />
                    </div>
                    <div class="form-group">
                      <label for="traffic-max-warnings" data-translate="liveData.traffic.maxWarnings">Max. Meldungen pro Autobahn</label>
                      <input type="number" id="traffic-max-warnings" value="5" min="1" max="20" />
                    </div>
                  </div>

                  <div class="form-group">
                    <label data-translate="liveData.traffic.reportTypes">Meldungstypen anzeigen</label>
                    <div class="transport-filter-grid">
                      <label class="checkbox-label"><input type="checkbox" id="show-warnings" checked /><span data-translate="liveData.traffic.warnings">Verkehrswarnungen</span></label>
                      <label class="checkbox-label"><input type="checkbox" id="show-roadworks" checked /><span data-translate="liveData.traffic.roadworks">Baustellen</span></label>
                      <label class="checkbox-label"><input type="checkbox" id="show-closures" checked /><span data-translate="liveData.traffic.closures">Sperrungen</span></label>
                    </div>
                  </div>

                  <div class="form-group">
                    <label data-translate="liveData.displayAssignment">Auf welchen Displays anzeigen?</label>
                    <div id="traffic-display-checkboxes" class="transport-filter-grid">
                      <p class="text-muted" data-translate="liveData.loadingDisplays">Lade Displays...</p>
                    </div>
                  </div>
                </div>

                <button class="btn btn-primary" id="saveTrafficSettings" data-translate="liveData.saveSettings">Einstellungen speichern</button>
                <button class="btn btn-secondary" id="previewTrafficData" style="margin-left: 0.5rem" data-translate="liveData.preview">Vorschau</button>
              </div>
            </div>

            <!-- Live-Vorschau Verkehr -->
            <div id="traffic-preview-card" class="settings-card" style="display: none">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><rect x="2" y="2" width="12" height="12" rx="1"/><line x1="5" y1="6" x2="11" y2="6"/><line x1="5" y1="8.5" x2="11" y2="8.5"/><line x1="5" y1="11" x2="8" y2="11"/></svg></span> <span data-translate="liveData.traffic.previewTitle">Verkehrs-Vorschau</span></h3>
              <div id="traffic-preview-content" class="live-preview-container">
                <p class="text-muted" data-translate="liveData.traffic.previewHint">Klicken Sie auf "Vorschau" um Verkehrsdaten zu laden.</p>
              </div>
            </div>

            <!-- Wetter Konfiguration -->
            <div class="settings-card">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><circle cx="8" cy="7" r="3"/><line x1="8" y1="1" x2="8" y2="3"/><line x1="8" y1="11" x2="8" y2="13"/><line x1="2" y1="7" x2="4" y2="7"/><line x1="12" y1="7" x2="14" y2="7"/><line x1="3.5" y1="3.5" x2="5" y2="5"/><line x1="11" y1="9" x2="12.5" y2="10.5"/></svg></span> <span data-translate="liveData.weather.title">Wetter & Vorhersage</span></h3>
              <p class="settings-description" data-translate="liveData.weather.description">
                Zeigen Sie aktuelles Wetter und eine mehrt√§gige Vorhersage auf Ihrem Display an. Daten von Open-Meteo (kostenlos, kein API-Key n√∂tig).
              </p>
              <div class="settings-form">
                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="weather-enabled" />
                    <span data-translate="liveData.weather.enable">Wetter auf Display anzeigen</span>
                  </label>
                </div>

                <div id="weather-config" style="display: none">
                  <div class="form-group">
                    <label for="weather-location-search" data-translate="liveData.weather.locationSearch">Ort suchen</label>
                    <div class="search-input-group">
                      <input type="text" id="weather-location-search" placeholder="z.B. Ahlen, M√ºnster, Berlin..." data-translate-placeholder="liveData.weather.locationPlaceholder" />
                      <button type="button" class="btn btn-secondary btn-sm" id="weather-search-btn" data-translate="common.search">Suchen</button>
                    </div>
                  </div>

                  <div id="weather-search-results" class="search-results-list" style="display: none"></div>

                  <div id="weather-selected-location" class="selected-station-card" style="display: none">
                    <div class="station-info">
                      <span class="station-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="16" height="16" aria-hidden="true"><circle cx="8" cy="6" r="2.5"/><path d="M8 15C8 15 3 10 3 6a5 5 0 0 1 10 0c0 4-5 9-5 9z"/></svg></span>
                      <div>
                        <strong id="weather-location-name">‚Äì</strong>
                        <small id="weather-location-coords" class="text-muted"></small>
                      </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-danger" id="weather-remove-location" data-translate="liveData.weather.remove">Entfernen</button>
                  </div>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="weather-show-forecast" checked />
                      <span data-translate="liveData.weather.showForecast">Vorhersage anzeigen</span>
                    </label>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label for="weather-forecast-days" data-translate="liveData.weather.forecastDays">Vorhersage-Tage</label>
                      <input type="number" id="weather-forecast-days" value="5" min="1" max="7" />
                    </div>
                  </div>

                  <div class="form-group">
                    <label data-translate="liveData.displayAssignment">Auf welchen Displays anzeigen?</label>
                    <div id="weather-display-checkboxes" class="transport-filter-grid">
                      <p class="text-muted" data-translate="liveData.loadingDisplays">Lade Displays...</p>
                    </div>
                  </div>
                </div>

                <button class="btn btn-primary" id="saveWeatherSettings" data-translate="liveData.saveSettings">Einstellungen speichern</button>
                <button class="btn btn-secondary" id="previewWeatherData" style="margin-left: 0.5rem" data-translate="liveData.preview">Vorschau</button>
              </div>
            </div>

            <!-- Wetter-Vorschau -->
            <div id="weather-preview-card" class="settings-card" style="display: none">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><rect x="2" y="2" width="12" height="12" rx="1"/><line x1="5" y1="6" x2="11" y2="6"/><line x1="5" y1="8.5" x2="11" y2="8.5"/><line x1="5" y1="11" x2="8" y2="11"/></svg></span> <span data-translate="liveData.weather.previewTitle">Wetter-Vorschau</span></h3>
              <div id="weather-preview-content" class="live-preview-container">
                <p class="text-muted" data-translate="liveData.weather.previewHint">Klicken Sie auf "Vorschau" um Wetterdaten zu laden.</p>
              </div>
            </div>

            <!-- Cache Management -->
            <div class="settings-card">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><polyline points="2,4 14,4"/><path d="M5 4V3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1"/><path d="M3 4l1 9a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1l1-9"/></svg></span> <span data-translate="liveData.cache.title">Cache-Verwaltung</span></h3>
              <p class="settings-description" data-translate="liveData.cache.description">
                Leeren Sie den Cache f√ºr √ñPNV-, Verkehrs- und Wetterdaten, um aktuelle Daten zu erzwingen.
              </p>
              <div class="settings-form">
                <div class="cache-stats" id="cache-stats">
                  <div class="cache-stat-item">
                    <span class="cache-label" data-translate="liveData.cache.transit">√ñPNV-Cache:</span>
                    <span id="transit-cache-count" class="cache-value">‚Äì</span>
                  </div>
                  <div class="cache-stat-item">
                    <span class="cache-label" data-translate="liveData.cache.traffic">Verkehr-Cache:</span>
                    <span id="traffic-cache-count" class="cache-value">‚Äì</span>
                  </div>
                  <div class="cache-stat-item">
                    <span class="cache-label" data-translate="liveData.cache.weather">Wetter-Cache:</span>
                    <span id="weather-cache-count" class="cache-value">‚Äì</span>
                  </div>
                </div>
                <button class="btn btn-secondary" id="clearTransitCache" data-translate="liveData.cache.clearTransit">√ñPNV-Cache leeren</button>
                <button class="btn btn-secondary" id="clearTrafficCache" style="margin-left: 0.5rem" data-translate="liveData.cache.clearTraffic">Verkehr-Cache leeren</button>
                <button class="btn btn-secondary" id="clearWeatherCache" style="margin-left: 0.5rem" data-translate="liveData.cache.clearWeather">Wetter-Cache leeren</button>
              </div>
            </div>
          </section>

          <!-- Settings Section -->
          <section id="settings-section" class="section">
            <h2>Einstellungen</h2>

            <!-- System-Modus (Raspberry Pi) ‚Äî ausgeblendet, da Server nicht auf Pi l√§uft -->
            <div class="settings-card" id="system-mode-card" style="display: none;">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><circle cx="8" cy="8" r="2"/><path d="M5 11a4.5 4.5 0 0 1 0-6"/><path d="M11 11a4.5 4.5 0 0 0 0-6"/><line x1="8" y1="10" x2="8" y2="14"/></svg></span> System-Modus</h3>
              <p class="settings-description">
                Wechseln Sie zwischen Normal-Modus (Netzwerk-Verbindung) und Hotspot-Modus (Offline-Betrieb).
              </p>
              
              <div id="system-mode-status" class="system-mode-status">
                <div class="mode-indicator">
                  <span class="mode-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="20" height="20" aria-hidden="true"><circle cx="12" cy="12" r="9" opacity="0.25"/><path d="M12 3a9 9 0 0 1 9 9" stroke-linecap="round"/></svg></span>
                  <span class="mode-text">Status wird geladen...</span>
                </div>
              </div>

              <div class="settings-form">
                <div class="mode-selection">
                  <label class="mode-option">
                    <input type="radio" name="system-mode" value="normal" id="mode-normal">
                    <div class="mode-card">
                      <div class="mode-header">
                        <span class="mode-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="24" height="24" aria-hidden="true"><circle cx="12" cy="12" r="9"/><line x1="3" y1="12" x2="21" y2="12"/><path d="M12 3a15 15 0 0 1 0 18"/><path d="M12 3a15 15 0 0 0 0 18"/></svg></span>
                        <h4>Normal-Modus</h4>
                      </div>
                      <ul class="mode-features">
                        <li>Verbindung zum vorhandenen Netzwerk</li>
                        <li>Internet-Zugang erforderlich</li>
                        <li>Externe Server-URL verwendbar</li>
                      </ul>
                    </div>
                  </label>

                  <label class="mode-option">
                    <input type="radio" name="system-mode" value="hotspot" id="mode-hotspot">
                    <div class="mode-card">
                      <div class="mode-header">
                        <span class="mode-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="24" height="24" aria-hidden="true"><path d="M2 9a14 14 0 0 1 20 0"/><path d="M5.5 12.5a9 9 0 0 1 13 0"/><path d="M9 16a5 5 0 0 1 6 0"/><circle cx="12" cy="19.5" r="1" fill="currentColor"/></svg></span>
                        <h4>Hotspot-Modus</h4>
                      </div>
                      <ul class="mode-features">
                        <li>Raspberry Pi erstellt WiFi Hotspot</li>
                        <li>SSID: <strong>PRASCO-Display</strong></li>
                        <li>Passwort: <strong>prasco123</strong></li>
                        <li>IP: <strong>192.168.4.1:3000</strong></li>
                      </ul>
                    </div>
                  </label>
                </div>

                <button class="btn btn-primary" id="switchSystemMode" style="margin-top: 1rem;">
                  Modus wechseln
                </button>
              </div>
            </div>

            <!-- Display-Einstellungen -->
            <div class="settings-card">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><circle cx="8" cy="8" r="2.5"/><path d="M8 1v2M8 13v2M1 8h2M13 8h2M3.05 3.05l1.41 1.41M11.54 11.54l1.41 1.41M3.05 12.95l1.41-1.41M11.54 4.46l1.41-1.41"/></svg></span> Display-Einstellungen</h3>
              <div class="settings-form">
                <div class="form-group">
                  <label for="refresh-interval">Auto-Refresh Intervall (Minuten)
                    <span class="info-tooltip-wrapper">
                      <button type="button" class="info-tooltip-btn" aria-label="Info">i</button>
                      <div class="info-tooltip-content">
                        Wie oft das Display neue Beitr√§ge vom Server abruft. Niedrigere Werte = schnellere Aktualisierung, aber mehr Netzwerkverkehr. Empfohlen: <strong>5 Minuten</strong>.
                      </div>
                    </span>
                  </label>
                  <input type="number" id="refresh-interval" value="5" min="1" />
                </div>

                <div class="form-group">
                  <label for="default-duration">Standard Anzeigedauer (Sekunden)
                    <span class="info-tooltip-wrapper">
                      <button type="button" class="info-tooltip-btn" aria-label="Info">i</button>
                      <div class="info-tooltip-content">
                        Fallback-Anzeigedauer f√ºr Beitr√§ge, bei denen keine individuelle Dauer eingestellt ist. Gilt f√ºr alle Displays.
                      </div>
                    </span>
                  </label>
                  <input type="number" id="default-duration" value="10" min="1" />
                </div>

                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="blend-effects-enabled" />
                    <span data-translate="settings.blendEffectsEnable">√úbergangseffekte aktivieren</span>
                  </label>
                  <small style="color: #666; display: block; margin-top: 0.25rem" data-translate="settings.blendEffectsHint">
                    Aktiviert animierte √úberg√§nge zwischen Beitr√§gen (Fade, Slide, Zoom)
                  </small>
                </div>

                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="transitions-external-only" />
                    <span data-translate="settings.transitionsExternalOnly">√úbergangseffekte nur auf externen Displays</span>
                  </label>
                  <small style="color: #666; display: block; margin-top: 0.25rem" data-translate="settings.transitionsExternalOnlyHint">
                    Spart Ressourcen: Raspberry Pi zeigt Posts ohne Animationen, externe Bildschirme mit Effekten
                  </small>
                </div>

                <div class="form-group">
                  <label for="live-data-interval" data-translate="settings.liveDataInterval">Live-Daten Intervall (Minuten)
                    <span class="info-tooltip-wrapper">
                      <button type="button" class="info-tooltip-btn" aria-label="Info">i</button>
                      <div class="info-tooltip-content" data-translate="settings.liveDataIntervalTooltip">
                        Wie h√§ufig Live-Daten (√ñPNV, Wetter, Nachrichten) zwischen den Beitr√§gen eingeblendet werden. Empfohlen: <strong>5 Minuten</strong>.
                      </div>
                    </span>
                  </label>
                  <input type="number" id="live-data-interval" value="5" min="1" max="60" />
                </div>

                <div class="form-group">
                  <label for="live-data-slide-duration" data-translate="settings.liveDataSlideDuration">Live-Daten Slide-Dauer (Sekunden)
                    <span class="info-tooltip-wrapper">
                      <button type="button" class="info-tooltip-btn" aria-label="Info">i</button>
                      <div class="info-tooltip-content" data-translate="settings.liveDataSlideDurationTooltip">
                        Wie lange jeder Live-Daten-Slide angezeigt wird (√ñPNV, Wetter, Nachrichten). Empfohlen: <strong>20 Sekunden</strong>.
                      </div>
                    </span>
                  </label>
                  <input type="number" id="live-data-slide-duration" value="20" min="5" max="120" />
                </div>

                <button class="btn btn-primary" id="saveDisplaySettings">
                  Einstellungen speichern
                </button>
              </div>
            </div>

            <!-- Globale Hintergrundmusik -->
            <div class="settings-card">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><path d="M6 13V4l7-2v9"/><circle cx="4.5" cy="13" r="2"/><circle cx="11.5" cy="11" r="2"/></svg></span> Globale Hintergrundmusik</h3>
              <p class="settings-description">
                Musik die √ºber alle Beitr√§ge hinweg abgespielt wird. Videos werden automatisch stumm
                geschaltet.
              </p>
              <div class="settings-form">
                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="global-music-enabled" />
                    <span>Globale Hintergrundmusik aktivieren</span>
                  </label>
                </div>

                <div id="global-music-config" style="display: none">
                  <div class="form-group">
                    <label for="global-music-url">Musik-URL</label>
                    <input
                      type="url"
                      id="global-music-url"
                      placeholder="https://example.com/music.mp3"
                    />
                  </div>

                  <div class="form-group">
                    <label for="global-music-file">Oder Musik-Datei hochladen</label>
                    <input type="file" id="global-music-file" accept="audio/*" />
                  </div>

                  <div class="form-group">
                    <label for="global-music-volume"
                      >Lautst√§rke: <span id="global-volume-value">30</span>%</label
                    >
                    <input type="range" id="global-music-volume" min="0" max="100" value="30" />
                  </div>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="global-music-mute-videos" checked />
                      <span>Videos automatisch stumm schalten</span>
                    </label>
                  </div>

                  <div class="form-group">
                    <label for="global-music-priority">Musik-Priorit√§t</label>
                    <select id="global-music-priority">
                      <option value="global">Globale Musik hat Vorrang</option>
                      <option value="post">Post-spezifische Musik hat Vorrang</option>
                    </select>
                    <small>Bestimmt, welche Musik abgespielt wird, wenn sowohl globale als auch post-spezifische Musik konfiguriert sind.</small>
                  </div>
                </div>

                <button class="btn btn-primary" id="saveGlobalMusicSettings">
                  Musik-Einstellungen speichern
                </button>
                <button class="btn btn-secondary" id="testGlobalMusic" style="margin-left: 0.5rem">
                  Test
                </button>
              </div>
            </div>

            <!-- Spracheinstellungen -->
            <div class="settings-card">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><circle cx="8" cy="8" r="6"/><line x1="2" y1="8" x2="14" y2="8"/><path d="M8 2a9 4.5 0 0 1 0 12"/><path d="M8 2a9 4.5 0 0 0 0 12"/></svg></span> Spracheinstellungen</h3>
              <div class="settings-form">
                <div class="form-group">
                  <label for="app-language">Sprache / Language / Lingua</label>
                  <select id="app-language">
                    <option value="de" data-flag="üá©üá™">üá©üá™ Deutsch</option>
                    <option value="en" data-flag="üá¨üáß">üá¨üáß English</option>
                    <option value="it" data-flag="üáÆüáπ">üáÆüáπ Italiano</option>
                  </select>
                  <small id="language-hint"
                    >Die Sprache wird f√ºr die gesamte Benutzeroberfl√§che verwendet.</small
                  >
                </div>
              </div>
            </div>

            <!-- KI-Assistent Einstellungen -->
            <div class="settings-card">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><path d="M8 2l2 4h4l-3.5 2.5 1.5 4L8 10l-4 2.5 1.5-4L2 6h4z"/></svg></span> <span data-translate="settings.ai">KI-Assistent</span></h3>
              <p class="settings-description" data-translate="settings.aiDescription">
                Nutzen Sie KI-Unterst√ºtzung beim Erstellen von Beitr√§gen: Texte generieren, verbessern, k√ºrzen oder √ºbersetzen. Verwendet OpenAI GPT-4o-mini.
              </p>
              <div class="settings-form">
                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="ai-enabled" />
                    <span data-translate="settings.aiEnable">KI-Assistent aktivieren</span>
                  </label>
                </div>
                <div id="ai-config" style="display: none;">
                  <div class="form-group">
                    <label for="ai-api-key" data-translate="settings.aiApiKey">OpenAI API-Key</label>
                    <input type="password" id="ai-api-key" placeholder="sk-..." autocomplete="off" />
                    <small style="color: #666;">Erh√§ltlich unter <a href="https://platform.openai.com/api-keys" target="_blank" style="color: #58585a;">platform.openai.com/api-keys</a></small>
                  </div>
                  <div id="ai-key-status" style="margin-bottom: 1rem;"></div>
                </div>
                <button class="btn btn-primary" id="saveAISettings">
                  Einstellungen speichern
                </button>
              </div>
            </div>

            <!-- SSO Einstellungen (nur f√ºr Super-Admin) -->
            <div id="sso-settings-section" class="settings-card" style="display: none">
              <h3>
                <span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><rect x="3" y="7" width="10" height="8" rx="1"/><path d="M5 7V5a3 3 0 0 1 6 0v2"/><circle cx="8" cy="11" r="1" fill="currentColor"/></svg></span> Single Sign-On (SSO) Konfiguration
              </h3>
              <p class="settings-description">
                Konfigurieren Sie Azure AD / Microsoft Entra ID f√ºr SSO-Authentifizierung.
                <a
                  href="/SSO-SETUP.md"
                  target="_blank"
                  title="Setup-Anleitung √∂ffnen"
                  class="help-link"
                  >Setup-Anleitung</a
                >
              </p>

              <div id="sso-status-banner" class="sso-status-banner">
                <span class="sso-status-indicator"></span>
                <span class="sso-status-text">Status wird geladen...</span>
              </div>

              <form id="sso-config-form" class="settings-form">
                <!-- SSO aktivieren -->
                <div class="form-group">
                  <label class="checkbox-label sso-toggle">
                    <input type="checkbox" id="sso-enabled" name="enabled" />
                    <span>SSO aktivieren</span>
                  </label>
                </div>

                <div id="sso-config-details" class="sso-config-details" style="display: none">
                  <!-- Provider -->
                  <div class="form-group">
                    <label for="sso-provider">SSO Provider</label>
                    <select id="sso-provider" name="provider">
                      <option value="azure_ad">Azure AD / Microsoft Entra ID</option>
                      <option value="ldap">
                        LDAP / Active Directory (Windows Server 2016/2019/2022)
                      </option>
                      <option value="adfs" disabled>
                        Active Directory Federation Services (geplant)
                      </option>
                    </select>
                  </div>

                  <!-- Azure AD Konfiguration -->
                  <div id="azure-ad-config" class="sso-provider-config">
                    <h4>Azure AD Konfiguration</h4>

                    <div class="form-row">
                      <div class="form-group">
                        <label for="azure-tenant-id">Tenant ID *</label>
                        <input
                          type="text"
                          id="azure-tenant-id"
                          name="tenantId"
                          placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
                        />
                        <small>Directory (tenant) ID aus Azure Portal</small>
                      </div>

                      <div class="form-group">
                        <label for="azure-client-id">Client ID (Application ID) *</label>
                        <input
                          type="text"
                          id="azure-client-id"
                          name="clientId"
                          placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
                        />
                        <small>Application (client) ID aus Azure Portal</small>
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="azure-client-secret">Client Secret *</label>
                      <input
                        type="password"
                        id="azure-client-secret"
                        name="clientSecret"
                        placeholder="Geheimnis eingeben..."
                      />
                      <small>Client Secret aus Azure Portal (Zertifikate & Geheimnisse)</small>
                    </div>

                    <div class="form-row">
                      <div class="form-group">
                        <label for="azure-redirect-uri">Redirect URI</label>
                        <input
                          type="text"
                          id="azure-redirect-uri"
                          name="redirectUri"
                          placeholder="http://localhost:3000/api/auth/sso/callback"
                        />
                        <small>Muss mit Azure AD App Registration √ºbereinstimmen</small>
                      </div>

                      <div class="form-group">
                        <label for="azure-logout-uri">Post-Logout URI</label>
                        <input
                          type="text"
                          id="azure-logout-uri"
                          name="postLogoutRedirectUri"
                          placeholder="http://localhost:3000/admin"
                        />
                      </div>
                    </div>
                  </div>

                  <!-- LDAP / Active Directory Konfiguration -->
                  <div id="ldap-config" class="sso-provider-config" style="display: none">
                    <h4><span class="subsection-icon">‚¨°</span> LDAP / Active Directory</h4>
                    <p class="form-help">F√ºr Windows Server 2016/2019/2022 mit Active Directory</p>

                    <div class="form-row">
                      <div class="form-group">
                        <label for="ldap-url">LDAP Server URL *</label>
                        <input
                          type="text"
                          id="ldap-url"
                          name="ldapUrl"
                          placeholder="ldap://dc.firma.local:389"
                        />
                        <small>F√ºr SSL: ldaps://dc.firma.local:636</small>
                      </div>

                      <div class="form-group">
                        <label for="ldap-base-dn">Base DN *</label>
                        <input
                          type="text"
                          id="ldap-base-dn"
                          name="ldapBaseDN"
                          placeholder="DC=firma,DC=local"
                        />
                        <small>Root-DN Ihrer Active Directory Domain</small>
                      </div>
                    </div>

                    <div class="form-row">
                      <div class="form-group">
                        <label for="ldap-bind-dn">Bind DN (Service-Account) *</label>
                        <input
                          type="text"
                          id="ldap-bind-dn"
                          name="ldapBindDN"
                          placeholder="CN=svc_prasco,CN=Users,DC=firma,DC=local"
                        />
                        <small>Distinguished Name des Service-Accounts</small>
                      </div>

                      <div class="form-group">
                        <label for="ldap-bind-password">Bind Passwort *</label>
                        <input
                          type="password"
                          id="ldap-bind-password"
                          name="ldapBindPassword"
                          placeholder="Service-Account Passwort"
                        />
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="ldap-user-search-base">Benutzer-Suchbasis *</label>
                      <input
                        type="text"
                        id="ldap-user-search-base"
                        name="ldapUserSearchBase"
                        placeholder="CN=Users,DC=firma,DC=local"
                      />
                      <small>OU/CN in der nach Benutzern gesucht wird</small>
                    </div>

                    <div class="form-group">
                      <label for="ldap-user-search-filter">Benutzer-Suchfilter</label>
                      <input
                        type="text"
                        id="ldap-user-search-filter"
                        name="ldapUserSearchFilter"
                        placeholder="(sAMAccountName={{username}})"
                      />
                      <small>{{username}} wird durch den eingegebenen Benutzernamen ersetzt</small>
                    </div>

                    <h5>Gruppen-basierte Rollenzuweisung (optional)</h5>

                    <div class="form-row">
                      <div class="form-group">
                        <label for="ldap-admin-group">Admin-Gruppe</label>
                        <input
                          type="text"
                          id="ldap-admin-group"
                          name="ldapAdminGroup"
                          placeholder="CN=PRASCO-Admins,OU=Groups,DC=firma,DC=local"
                        />
                        <small>Mitglieder erhalten Admin-Rolle</small>
                      </div>

                      <div class="form-group">
                        <label for="ldap-editor-group">Editor-Gruppe</label>
                        <input
                          type="text"
                          id="ldap-editor-group"
                          name="ldapEditorGroup"
                          placeholder="CN=PRASCO-Editors,OU=Groups,DC=firma,DC=local"
                        />
                        <small>Mitglieder erhalten Editor-Rolle</small>
                      </div>
                    </div>

                    <div class="form-group">
                      <label class="checkbox-label">
                        <input type="checkbox" id="ldap-tls-reject" name="ldapTlsReject" />
                        <span
                          >Selbstsignierte Zertifikate ablehnen (f√ºr Produktionsumgebungen
                          empfohlen)</span
                        >
                      </label>
                    </div>
                  </div>

                  <hr class="settings-divider" />

                  <!-- Benutzereinstellungen -->
                  <h4>Benutzer-Einstellungen</h4>

                  <div class="form-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="sso-auto-create" name="autoCreateUsers" checked />
                      <span>Benutzer automatisch erstellen bei erstem SSO-Login</span>
                    </label>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label for="sso-default-role">Standard-Rolle f√ºr neue SSO-Benutzer</label>
                      <select id="sso-default-role" name="defaultRole">
                        <option value="viewer">Betrachter</option>
                        <option value="editor" selected>Editor</option>
                        <option value="admin">Administrator</option>
                      </select>
                    </div>

                    <div class="form-group">
                      <label for="sso-allowed-domains">Erlaubte E-Mail-Domains</label>
                      <input
                        type="text"
                        id="sso-allowed-domains"
                        name="allowedDomains"
                        placeholder="z.B. firma.de, firma.com"
                      />
                      <small>Leer = alle Domains erlaubt, Komma-getrennt f√ºr mehrere</small>
                    </div>
                  </div>
                </div>

                <!-- Aktionen -->
                <div class="form-actions sso-actions">
                  <button type="submit" class="btn btn-primary" id="sso-save-btn">
                    Konfiguration speichern
                  </button>
                  <button type="button" class="btn btn-secondary" id="sso-test-btn">
                    Verbindung testen
                  </button>
                </div>

                <div id="sso-test-result" class="sso-test-result" style="display: none"></div>
              </form>
            </div>

            <!-- Info / √úber diese Anwendung -->
            <div class="settings-card">
              <h3><span class="settings-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true"><circle cx="8" cy="8" r="6"/><line x1="8" y1="7" x2="8" y2="12"/><circle cx="8" cy="5" r="0.5" fill="currentColor" stroke="none"/></svg></span> √úber diese Anwendung</h3>
              <div class="app-info-section">
                <div class="app-info-logo">
                  <div class="app-logo-circle">
                    <span>P</span>
                  </div>
                </div>
                <div class="app-info-details">
                  <h4>PRASCO Digital Signage</h4>
                  <p class="app-description">
                    Digitales Schwarzes Brett f√ºr Unternehmen und Organisationen
                  </p>

                  <div class="app-info-grid">
                    <div class="app-info-item">
                      <span class="info-label">Version</span>
                      <span class="info-value" id="app-version">1.0.0</span>
                    </div>
                    <div class="app-info-item">
                      <span class="info-label">Entwickler</span>
                      <span class="info-value">Christian P√∂ser</span>
                    </div>
                    <div class="app-info-item">
                      <span class="info-label">Lizenz</span>
                      <span class="info-value">MIT License</span>
                    </div>
                    <div class="app-info-item">
                      <span class="info-label">Build</span>
                      <span class="info-value" id="app-build-date">2025</span>
                    </div>
                  </div>

                  <div class="app-tech-stack">
                    <span class="tech-badge">Node.js</span>
                    <span class="tech-badge">Express</span>
                    <span class="tech-badge">TypeScript</span>
                    <span class="tech-badge">PostgreSQL</span>
                    <span class="tech-badge">Sequelize</span>
                  </div>

                  <div class="app-links">
                    <a href="https://github.com" target="_blank" class="app-link"> ‚Üí Repository </a>
                    <a href="/api/docs" target="_blank" class="app-link"> ‚Üí API Dokumentation </a>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <footer class="admin-footer">
          <div class="footer-left">
            <span>¬© 2026 PRASCO - Digitales Schwarzes Brett</span>
          </div>
          <div class="footer-right">
            <span id="footer-clock" class="footer-clock">--:--:--</span>
            <span id="footer-date" class="footer-date"></span>
          </div>
        </footer>
      </main>
    </div>

    <!-- Modal: Eigenes Passwort √§ndern -->
    <div id="password-modal" class="modal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Passwort √§ndern</h3>
          <button class="modal-close" id="closePasswordModal">&times;</button>
        </div>
        <form id="changePasswordForm">
          <div class="form-group">
            <label for="current-password">Aktuelles Passwort *</label>
            <input type="password" id="current-password" name="currentPassword" autocomplete="current-password" required />
          </div>
          <div class="form-group">
            <label for="new-password">Neues Passwort *</label>
            <input type="password" id="new-password" name="newPassword" minlength="6" autocomplete="new-password" required />
            <small class="form-hint">Mindestens 6 Zeichen</small>
          </div>
          <div class="form-group">
            <label for="confirm-password">Passwort best√§tigen *</label>
            <input
              type="password"
              id="confirm-password"
              name="confirmPassword"
              minlength="6"
              autocomplete="new-password"
              required
            />
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Passwort √§ndern</button>
            <button type="button" class="btn btn-secondary" id="cancelPasswordChange">
              Abbrechen
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="/js/admin.js?v=4.1"></script>
  </body>
</html>
